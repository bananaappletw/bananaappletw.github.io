<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>bananaappletw's blog Blog</title>
        <link>https://bananaappletw.github.io/archives</link>
        <description>bananaappletw's blog Blog</description>
        <lastBuildDate>Wed, 03 Jul 2019 02:35:06 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Official website review]]></title>
            <link>https://bananaappletw.github.io/archives/official-website-review</link>
            <guid>https://bananaappletw.github.io/archives/official-website-review</guid>
            <pubDate>Wed, 03 Jul 2019 02:35:06 GMT</pubDate>
            <description><![CDATA[這次官網的目的是要做出一個靜態的網站]]></description>
            <content:encoded><![CDATA[<p>這次官網的目的是要做出一個靜態的網站</p><p>然後提供非技術人員能夠寫稿然後發表(包含上傳圖片還有一些比較客製化的樣式)</p><p>這種東西比較精確的名詞是 Static Site Generators</p><p>可以參考 <a href="https://www.staticgen.com/" target="_blank" rel="noopener noreferrer" title="https://www.staticgen.com/">https://www.staticgen.com/</a> 看看每個框架的 star, issue, fork 數量</p><p>看看這些數值的變動來決定使用什麼框架</p><p>當不知道要選什麼框架的時候可以從一些方向下手</p><ul><li>程式語言</li><li>使用人數多寡,使用人數比較多的話也會比較多人遇到相同問題,這樣有解的機率也會比較高</li></ul><p>主要需求:</p><ul><li>i18n</li></ul><p><code>/zh/index.html</code></p><p>顯示中文的頁面</p><p><code>/en/index.html</code></p><p>顯示英文的頁面</p><ul><li>不同頁面呈現不同 category 的文章</li></ul><p>像是 <code>/blog</code></p><p>會顯示出 front matter 的 category 是 blog 的文章</p><ul><li>能夠照 i18n 顯示對應語系的文章</li></ul><p>像是 <code>/zh/blog</code></p><p>顯示出 front matter 的 category 是 blog 而且 locale 是 zh 的文章</p><ul><li>各自 category 的文章照 tag 分類顯示</li></ul><p>像是 <code>/blog/life</code></p><p>會顯示出 front matter 的 category 是 blog 的文章而且 tag 是 life 的文章</p><h1>i18n</h1><p>主要是參考這篇文章 <a href="https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/" target="_blank" rel="noopener noreferrer" title="https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/">https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/</a></p><p><code>index.html</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    permalink: /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    i18n_prefix: index</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lang: en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{% t title %}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>zh/index.html</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">permalink: /zh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">i18n_prefix: index</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lang: en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{% t title %}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 你好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>_data/en.yml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">index:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    title: hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>_data/zh.yml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">index:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    title: 你好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>_plugins/i18n_tag</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">module Jekyll</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  class I18nTag &lt; Liquid::Tag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    def initialize(tag_name, text, tokens)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      super</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      @text = text.strip</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    def render(context)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      site = context.registers[:site]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      page = context.registers[:page]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      path = @text.split('.')</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      if site.data[page['locale']][page['i18n_prefix']]&amp;.dig(*path)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        site.data[page['locale']][page['i18n_prefix']].dig(*path)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        site.data[page['locale']].dig(*path)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Liquid::Template.register_tag('t', Jekyll::I18nTag)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Pagination</h1><p>使用這個套件 <a href="https://github.com/sverrirs/jekyll-paginate-v2" target="_blank" rel="noopener noreferrer" title="https://github.com/sverrirs/jekyll-paginate-v2">https://github.com/sverrirs/jekyll-paginate-v2</a></p><p>這個套件能夠依照 locale 和 category 和 tag 來產生 pagination</p><p><code>index.html</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout: index</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">permalink: /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pagination:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    per_page: 5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    locale: en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>resource.html</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout: resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">permalink: /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pagination:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    categories:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    per_page: 5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    locale: en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>resource-browse-by-tag-technical</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout: resource-browse-by-tag-technical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">permalink: /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pagination:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    categories:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tags:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - technical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    per_page: 5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    locale: en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這邊用比較智障的方法產生 browse by tag 的網頁</p><p>原本是想說用 Jekyll 的 generator plugin 先把某個 category 的文章 tag 拿出來，然後依照 tag 產生 page</p><p>我大概寫了三天放棄了</p><p>這個方法是行不通的如果要用 jekyll-pagination-v2 的話</p><p>我猜可能用原生的 pagination 有可能可以</p><p>但是沒有想要去嘗試了</p><p>Jekyll 有個爛的點就是他的 plugin 都是要用猜的去寫</p><p>我的方法是去參考現在有的各個 plugin</p><p>然後開 <a href="https://www.rubydoc.info/github/jekyll/jekyll/Jekyll/Page" target="_blank" rel="noopener noreferrer">Jekyll::Page</a> 的文件邊寫邊猜</p><h1>給上稿人員使用的網站</h1><p>很推薦這個網站 <a href="https://forestry.io/" target="_blank" rel="noopener noreferrer" title="https://forestry.io/">https://forestry.io/</a></p><p>其實 i18n 的作法就是這個網站的文章</p><h1>CSS 小技巧或是</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="image-wrapper">image wrapper<a href="#image-wrapper" class="hash-link" aria-label="Direct link to image wrapper" title="Direct link to image wrapper">​</a></h2><p>我自己是比較喜歡在外面再加一層 wrapper 然後用外框來控制寬度和高度</p><p>寬度 300px 然後高度保持比例放大</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html">HTML<a href="#html" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="logo"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;img src="..."&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="css">CSS<a href="#css" class="hash-link" aria-label="Direct link to CSS" title="Direct link to CSS">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.logo{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    width: 300px;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    img{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        width: 100%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aspect-ratio-boxes">Aspect Ratio Boxes<a href="#aspect-ratio-boxes" class="hash-link" aria-label="Direct link to Aspect Ratio Boxes" title="Direct link to Aspect Ratio Boxes">​</a></h2><p>可以參考這篇文章 <a href="https://css-tricks.com/aspect-ratio-boxes/" target="_blank" rel="noopener noreferrer" title="https://css-tricks.com/aspect-ratio-boxes/">https://css-tricks.com/aspect-ratio-boxes/</a></p><p>比如說想要比例是 4:3 (寬 vs 高)</p><p>寬度佔滿 100% 垂直至中對齊多餘的隱藏起來</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html-1">HTML<a href="#html-1" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="ratio-box"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;img src="..."&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="original-css">Original CSS<a href="#original-css" class="hash-link" aria-label="Direct link to Original CSS" title="Direct link to Original CSS">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.ratio-box{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    overflow: hidden;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    position: relative;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;::after {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      content: "";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      display: block;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      padding-top: 75%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    img {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      position: absolute;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      top: 50%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      transform: translateY(-50%);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      width: 100%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inspired-by-one-of-my-friends-css">Inspired by one of my friend's CSS<a href="#inspired-by-one-of-my-friends-css" class="hash-link" aria-label="Direct link to Inspired by one of my friend's CSS" title="Direct link to Inspired by one of my friend's CSS">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.ratio-box{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;::after {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      content: "";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      display: block;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      padding-top: 75%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    img {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      height: 100%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      width: 100%;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      object-fit: cover;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nested-links">Nested links<a href="#nested-links" class="hash-link" aria-label="Direct link to Nested links" title="Direct link to Nested links">​</a></h2><p><a href="https://css-tricks.com/nested-links/" target="_blank" rel="noopener noreferrer" title="https://css-tricks.com/nested-links/">https://css-tricks.com/nested-links/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html-2">HTML<a href="#html-2" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;a href="..."&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;a href="..."&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/a&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這樣其實就會有非預期的現象發生應該避免</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stop-box-sizing-everything">Stop box-sizing everything<a href="#stop-box-sizing-everything" class="hash-link" aria-label="Direct link to Stop box-sizing everything" title="Direct link to Stop box-sizing everything">​</a></h2><p><a href="https://aastudio.fr/box-sizing.html" target="_blank" rel="noopener noreferrer" title="https://aastudio.fr/box-sizing.html">https://aastudio.fr/box-sizing.html</a></p><p>一開始在寫的時候發現有 <code>box-sizing</code> 這東西好方便喔</p><p>你設寬度是多少就是多少</p><p>就直接把全部東西都這樣寫了</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html-3">HTML<a href="#html-3" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  html { box-sizing: border-box; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>後來會發現有些東西根本不需要或是能用 padding + border 算就可以了</p><p>就全部改回來了</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mobile-first">Mobile first<a href="#mobile-first" class="hash-link" aria-label="Direct link to Mobile first" title="Direct link to Mobile first">​</a></h2><p>一開始在刻的時候先刻 desktop 版再刻 mobile 版</p><p>事實上應該反過來</p><p>這個我刻到一半的時候發覺這件事後就改過來了</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dont-affect-positioning-of-other-elements-on-border-width-changes">Don't affect positioning of other elements on border-width changes<a href="#dont-affect-positioning-of-other-elements-on-border-width-changes" class="hash-link" aria-label="Direct link to Don't affect positioning of other elements on border-width changes" title="Direct link to Don't affect positioning of other elements on border-width changes">​</a></h2><p>你可能會想要有 hover 的時候</p><p>元素下面加一下底線</p><p>但是你加了 border 元素的大小就改變了</p><p>就會產生移位</p><ol><li>使用 box-shadow</li><li>你可以先把 border 加上去但是 transparent 等到 hover 的時候再改變顏色顯示出來</li></ol><h1>CSS Naming</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oocss"><a href="https://www.keycdn.com/blog/oocss" target="_blank" rel="noopener noreferrer" title="OOCSS">OOCSS(Object Oriented CSS)</a><a href="#oocss" class="hash-link" aria-label="Direct link to oocss" title="Direct link to oocss">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html-4">HTML<a href="#html-4" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;button class="btn btn-small btn-primary"&gt;&lt;/button&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="smacss"><a href="http://smacss.com/" target="_blank" rel="noopener noreferrer">SMACSS</a><a href="#smacss" class="hash-link" aria-label="Direct link to smacss" title="Direct link to smacss">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="html-5">HTML<a href="#html-5" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;ul class="nav"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;li class="nav-item"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;a class="nav-link active" href="#"&gt;Active&lt;/a&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/li&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/ul&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bem"><a href="http://getbem.com/naming/" target="_blank" rel="noopener noreferrer">BEM</a><a href="#bem" class="hash-link" aria-label="Direct link to bem" title="Direct link to bem">​</a></h2><blockquote><p>There are only two hard problems in Computer Science: cache invalidation and naming things — <em>Phil Karlton</em></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="block">Block<a href="#block" class="hash-link" aria-label="Direct link to Block" title="Direct link to Block">​</a></h3><p><code>block-name</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-6">HTML<a href="#html-6" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="block"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;span class="block__elem"&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="css-1">CSS<a href="#css-1" class="hash-link" aria-label="Direct link to CSS" title="Direct link to CSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block { color: #042; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="element">Element<a href="#element" class="hash-link" aria-label="Direct link to Element" title="Direct link to Element">​</a></h3><p><code>block-name__element-name</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-7">HTML<a href="#html-7" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="block"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;span class="block__elem"&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="css-2">CSS<a href="#css-2" class="hash-link" aria-label="Direct link to CSS" title="Direct link to CSS">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="good">Good<a href="#good" class="hash-link" aria-label="Direct link to Good" title="Direct link to Good">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block__elem { color: #042; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="bad">Bad<a href="#bad" class="hash-link" aria-label="Direct link to Bad" title="Direct link to Bad">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block .block__elem { color: #042; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    div.block__elem { color: #042; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modifier">Modifier<a href="#modifier" class="hash-link" aria-label="Direct link to Modifier" title="Direct link to Modifier">​</a></h3><p>其實 Modifier 的寫法比較有歧異</p><p>有兩種寫法</p><p><code>block-name__element-name--modifier-name-modifier_value</code></p><p><code>block-name__element-name_modifier-name_modifier_value</code></p><p>我自己是比較喜歡後者</p><p>以下例子都用後者的寫法</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-8">HTML<a href="#html-8" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="good-1">Good<a href="#good-1" class="hash-link" aria-label="Direct link to Good" title="Direct link to Good">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="block block_mod"&gt;...&lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="block block_size-big</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        block_shadow_yes"&gt;...&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="bad-1">Bad<a href="#bad-1" class="hash-link" aria-label="Direct link to Bad" title="Direct link to Bad">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="block_mod"&gt;...&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="css-3">CSS<a href="#css-3" class="hash-link" aria-label="Direct link to CSS" title="Direct link to CSS">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="use-modifier-class-name-as-selector">Use modifier class name as selector:<a href="#use-modifier-class-name-as-selector" class="hash-link" aria-label="Direct link to Use modifier class name as selector:" title="Direct link to Use modifier class name as selector:">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block_hidden { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="to-alter-elements-based-on-a-block-level-modifier">To alter elements based on a block-level modifier:<a href="#to-alter-elements-based-on-a-block-level-modifier" class="hash-link" aria-label="Direct link to To alter elements based on a block-level modifier:" title="Direct link to To alter elements based on a block-level modifier:">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block_mod .block__elem { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="element-modifier">Element modifier:<a href="#element-modifier" class="hash-link" aria-label="Direct link to Element modifier:" title="Direct link to Element modifier:">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block__elem_mod { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-9">HTML<a href="#html-9" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;form class="form form_theme_xmas form_simple"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;input class="form__input" type="text" /&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;input</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    class="form__submit form__submit_disabled"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type="submit" /&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/form&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="css-4">CSS<a href="#css-4" class="hash-link" aria-label="Direct link to CSS" title="Direct link to CSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form_theme_xmas { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form_simple { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form__input { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form__submit { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.form__submit_disabled { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="youtube">Youtube<a href="#youtube" class="hash-link" aria-label="Direct link to Youtube" title="Direct link to Youtube">​</a></h3><p>詳細可以參考這篇文章 <a href="https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252" target="_blank" rel="noopener noreferrer" title="https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252">https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-10">HTML<a href="#html-10" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;header class="youtube-header"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;img class="youtube-header__logo"/&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;div class="youtube-header__search"&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;ul class="youtube-header__list"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;li class="youtube-header__item&gt;&lt;/li&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;li class="youtube-header__item&gt;&lt;/li&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/header&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sass">SASS<a href="#sass" class="hash-link" aria-label="Direct link to SASS" title="Direct link to SASS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.youtube-header {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &amp;__logo {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &amp;__search {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &amp;__list {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &amp;__item {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="手好癢好想寫-nested-element">手好癢好想寫 nested element<a href="#手好癢好想寫-nested-element" class="hash-link" aria-label="Direct link to 手好癢好想寫 nested element" title="Direct link to 手好癢好想寫 nested element">​</a></h3><p>可以先看完這篇 <a href="https://en.bem.info/methodology/quick-start/#nesting-1" target="_blank" rel="noopener noreferrer" title="https://en.bem.info/methodology/quick-start/#nesting-1">https://en.bem.info/methodology/quick-start/#nesting-1</a></p><p>要遵守三點:</p><ul><li>Elements can be nested inside each other.</li><li>You can have any number of nesting levels.</li><li>An element is always part of a block, not another element. This means that element names can't define a hierarchy such as <code>block__elem1__elem2</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4><p>可能會遇到一種情況有 block 和 elem1 和 elem2</p><p>elem1 和 elem2 相對於 block</p><p>那就可以寫成 <code>block__elem1</code> 和 <code>block__elem2</code></p><p>但是 elem2 是相對於 elem1 的</p><p>可以忽視 elem2 對於 elem1 的關係</p><p>畢竟他們都是相對於 block</p><p>要是你將 elem2 nested 在 elem1 裡</p><p>那你就無法讓 elem2 在沒有 elem1 的情況下獨立存在</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;form class="search-form"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="search-form__content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;input class="search-form__input"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;button class="search-form__button"&gt;Search&lt;/button&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/form&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或是將 elem1 加上 elem2 當成組合字當成一個新的 element <code>elem1-elem2</code></p><p><code>block__elem1-elem2</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;form class="search-form"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="search-form__content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;input class="search-form__content-input"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;button class="search-form__content-button"&gt;Search&lt;/button&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/form&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="block-in-block">Block in Block<a href="#block-in-block" class="hash-link" aria-label="Direct link to Block in Block" title="Direct link to Block in Block">​</a></h3><p><a href="https://gist.github.com/Integralist/4960210" target="_blank" rel="noopener noreferrer" title="https://gist.github.com/Integralist/4960210">https://gist.github.com/Integralist/4960210</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-11">HTML<a href="#html-11" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="blocka"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="blocka__blockb"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="blocka__blockb__elementb&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-html1">Alternative HTML(1)<a href="#alternative-html1" class="hash-link" aria-label="Direct link to Alternative HTML(1)" title="Direct link to Alternative HTML(1)">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="blocka"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="blocka__elementa blockb"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="blockb__elementb&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以 blocka__elementa 來代表和 blocka 的關係</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-html2">Alternative HTML(2)<a href="#alternative-html2" class="hash-link" aria-label="Direct link to Alternative HTML(2)" title="Direct link to Alternative HTML(2)">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="blocka"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="blockb"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="blockb__elementb&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果 blocka 和 blockb 沒有相對關係的話可以省略 blocka-elementa</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="block-container">Block container<a href="#block-container" class="hash-link" aria-label="Direct link to Block container" title="Direct link to Block container">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-12">HTML<a href="#html-12" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="product-container&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="product&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="product__content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-html1-1">Alternative HTML(1)<a href="#alternative-html1-1" class="hash-link" aria-label="Direct link to Alternative HTML(1)" title="Direct link to Alternative HTML(1)">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="product&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="product__inner&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="product__content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>將 product 往上拉一層原本的用 product__inner 取代</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-html2-1">Alternative HTML(2)<a href="#alternative-html2-1" class="hash-link" aria-label="Direct link to Alternative HTML(2)" title="Direct link to Alternative HTML(2)">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="product-container&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="product&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="product__content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不予理會 product-container 和 product 的關係</p><p>我自己是比較喜歡這個寫法</p><p>主要的分界點是在於 product 是否能獨立存在 product-container 外</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dont-use-nested-selectors">Don't use nested selectors<a href="#dont-use-nested-selectors" class="hash-link" aria-label="Direct link to Don't use nested selectors" title="Direct link to Don't use nested selectors">​</a></h3><p>只有你要改變 element 的 style based on block 的 modifier 的時候</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button_hovered .button__text</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  text-decoration: underline;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button_theme_islands .button__text</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  line-height: 1.5;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或是你可以把原本的 SCSS 用 <code>@at-root</code> 改寫</p><p>既可以用巢狀結構包起來但是輸出卻不是 nested</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bad-scss">bad SCSS<a href="#bad-scss" class="hash-link" aria-label="Direct link to bad SCSS" title="Direct link to bad SCSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .block__element{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="good-scss">Good SCSS<a href="#good-scss" class="hash-link" aria-label="Direct link to Good SCSS" title="Direct link to Good SCSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @at-root #{&amp;}__element{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="good-css-output">Good CSS Output<a href="#good-css-output" class="hash-link" aria-label="Direct link to Good CSS Output" title="Direct link to Good CSS Output">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.block__element{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dont-use-combined-selectors">Don't use combined selectors<a href="#dont-use-combined-selectors" class="hash-link" aria-label="Direct link to Don't use combined selectors" title="Direct link to Don't use combined selectors">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-13">HTML<a href="#html-13" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;button class="button button_theme_islands button_active"&gt;...&lt;/button&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bad-css">Bad CSS<a href="#bad-css" class="hash-link" aria-label="Direct link to Bad CSS" title="Direct link to Bad CSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button.button_theme_islands {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button.button_active {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你必須將兩個 modifier 拉到同樣 .button 的 level 才能有相同的 CSS 權重</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bad-scss-1">Bad SCSS<a href="#bad-scss-1" class="hash-link" aria-label="Direct link to Bad SCSS" title="Direct link to Bad SCSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .button_active{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .button_theme_islands{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="specific-page-html">Specific page HTML<a href="#specific-page-html" class="hash-link" aria-label="Direct link to Specific page HTML" title="Direct link to Specific page HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="index-page-button button button_active"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="specific-page-css">Specific page CSS<a href="#specific-page-css" class="hash-link" aria-label="Direct link to Specific page CSS" title="Direct link to Specific page CSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.index-page-button{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>共用 button 的 style 將特定頁面的 style 寫在 index-page-button 裡</p><p>但是你會發覺蓋不過去 button 的 modifier 因為 button_active 和 button_theme_islands 的 Specificity</p><p>都比 index-page-button 高</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="good-css">Good CSS<a href="#good-css" class="hash-link" aria-label="Direct link to Good CSS" title="Direct link to Good CSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button_theme_islands {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button_active {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.button {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以這樣寫利用 css import 的 order 來決定複寫的優先程度</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// component (button)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@import "component";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Specific page(index)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@import "index";</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exception">Exception<a href="#exception" class="hash-link" aria-label="Direct link to Exception" title="Direct link to Exception">​</a></h4><p>比如你有可能需要用 markdown 生成 html tag</p><p>在 .content class 的 block 套用你自己寫的 style</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="content"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ... &lt;!-- the user’s text --&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CSS rules:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.content a {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.content p {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  font-family: Arial, sans-serif;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  text-align: center;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dont-use-tag-selector">Don't use tag selector<a href="#dont-use-tag-selector" class="hash-link" aria-label="Direct link to Don't use tag selector" title="Direct link to Don't use tag selector">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="html-14">HTML<a href="#html-14" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;header&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;a href="/"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;img src="img.logo.png" alt="Logo"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/a&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/header&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="scss">SCSS<a href="#scss" class="hash-link" aria-label="Direct link to SCSS" title="Direct link to SCSS">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">header{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>像這樣的命名方式很難讓人去聯想 header 和 a 之間的關係</p><p>HTML 雖然有 <a href="https://www.w3schools.com/html/html5_semantic_elements.asp" target="_blank" rel="noopener noreferrer">semantic elements</a> 但是現在能表示的語意還是比較有限</p><p>用 class name 去表示比較清楚</p><h1>對於簡單和複雜的元素的策略</h1><p>簡單的元素可以想辦法用 utilities class 來達成</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="html-15">HTML<a href="#html-15" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="once-block font-bold text-align-center"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>複雜的元素其實就比較適合自己寫成一個 class 並撰寫 style，不然你的 html 裡的 class 可能就會太多，很複雜不好維護</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="html-16">HTML<a href="#html-16" class="hash-link" aria-label="Direct link to HTML" title="Direct link to HTML">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;div class="muzukashii-block"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Nested nested block and element</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad-html">Bad HTML<a href="#bad-html" class="hash-link" aria-label="Direct link to Bad HTML" title="Direct link to Bad HTML">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;header class="navber"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="navbar-menu"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="navbar-menu-item&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;div class="navbar-menu-item-submenu"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &lt;div class="navbar-menu-item-submenu-item&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/header&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="good-html">Good HTML<a href="#good-html" class="hash-link" aria-label="Direct link to Good HTML" title="Direct link to Good HTML">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;header class="navber"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;div class="navbar-menu"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;div class="navbar-item&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;div class="navbar-submenu"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &lt;div class="navbar-submenu-item&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/header&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這個我自己是覺得比較主觀的想法不一定符合 convension</p><p>寫 class 的關鍵就是不要撞名</p><p>主要的概念是 namespace 將這整個 navbar component 關在 navbar 這個 namespace 下</p><p>在適當的層數切成另一個新的 block</p><p>只要每個元素都關在 navbar namespace 底下就不會和其他元件撞名</p><h1>CSS 感想</h1><p>盡量讓元素都在同一層</p><p>讓 CSS 的 import order 來覆蓋相同的屬性</p><p>後來想了一下其實 BEM 可能沒有比較好</p><p>又再去看了一次 youtube 的網站</p><p>他們改回用 - 分隔了</p><p>當然如果能用 <a href="https://css-tricks.com/css-modules-part-1-need/" target="_blank" rel="noopener noreferrer">CSS Module</a> 是最好的拉</p><p>這樣 class 名字都不會撞</p><h1>一些下次可以改進的點</h1><ul><li>可能需要跟設計師協調設計稿的 breakpoint，會是希望可以套框架的 convension 可以善用 utilities class 用 class 就組出簡單的 style<ul><li>xs</li><li>sm(min-width: 576px)</li><li>md(min-width: 768px)</li><li>lg(min-width: 992px)</li><li>xl(min-width: 1200px)</li></ul></li><li>一開始就將所有頁面看完再開始寫，先將可以共用的 style 刻出來，再依照各個頁面不同的要求稍作調整，我一開始寫是一個頁面一個頁面刻，每次刻完一個頁面才發覺到其他頁面可以共用這個 style，但是為了共用 style 又必須稍做調整</li><li>使用 rem 和 em 取代 px，這個有溝通過只是在設計的時候就用了 px 了，來不及</li></ul><h1>References</h1><ul><li><a href="https://cythilya.github.io/2018/06/05/css-methodologies/" target="_blank" rel="noopener noreferrer" title="https://cythilya.github.io/2018/06/05/css-methodologies/">https://cythilya.github.io/2018/06/05/css-methodologies/</a></li><li><a href="https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252" target="_blank" rel="noopener noreferrer" title="https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252">https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252</a></li><li><a href="https://css-tricks.com/lets-define-exactly-atomic-css/" target="_blank" rel="noopener noreferrer" title="https://css-tricks.com/lets-define-exactly-atomic-css/">https://css-tricks.com/lets-define-exactly-atomic-css/</a></li><li><a href="https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements" target="_blank" rel="noopener noreferrer" title="https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements">https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements</a></li><li><a href="https://www.smashingmagazine.com/2018/06/bem-for-beginners/" target="_blank" rel="noopener noreferrer" title="https://www.smashingmagazine.com/2018/06/bem-for-beginners/">https://www.smashingmagazine.com/2018/06/bem-for-beginners/</a></li><li><a href="https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506" target="_blank" rel="noopener noreferrer" title="https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506">https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506</a></li><li><a href="https://zellwk.com/blog/css-architecture-1/" target="_blank" rel="noopener noreferrer" title="https://zellwk.com/blog/css-architecture-1/">https://zellwk.com/blog/css-architecture-1/</a></li><li><a href="https://gist.github.com/Integralist/4960210" target="_blank" rel="noopener noreferrer" title="https://gist.github.com/Integralist/4960210">https://gist.github.com/Integralist/4960210</a></li><li><a href="https://css-tricks.com/css-modules-part-1-need/" target="_blank" rel="noopener noreferrer" title="https://css-tricks.com/css-modules-part-1-need/">https://css-tricks.com/css-modules-part-1-need/</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Welcome]]></title>
            <link>https://bananaappletw.github.io/archives/welcome</link>
            <guid>https://bananaappletw.github.io/archives/welcome</guid>
            <pubDate>Thu, 30 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Blog features are powered by the blog plugin. Simply add files to the blog directory. It supports tags as well!]]></description>
            <content:encoded><![CDATA[<p>Blog features are powered by the blog plugin. Simply add files to the <code>blog</code> directory. It supports tags as well!</p><p>Delete the whole directory if you don't want the blog features. As simple as that!</p>]]></content:encoded>
            <category>facebook</category>
            <category>hello</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[Review of bamboofox platform]]></title>
            <link>https://bananaappletw.github.io/archives/review-of-bamboofox-platform</link>
            <guid>https://bananaappletw.github.io/archives/review-of-bamboofox-platform</guid>
            <pubDate>Mon, 28 Aug 2017 09:19:00 GMT</pubDate>
            <description><![CDATA[記錄一下寫 bamboofox 平台的心得]]></description>
            <content:encoded><![CDATA[<p>記錄一下寫 bamboofox 平台的心得</p><p>其實當初這個平台是為了 migrate 以前的課程所建置的</p><p>當初的課程平台只能容納一個課程</p><p>所以主要的設計是要能容納多個課程為主</p><p>為了註冊方便就寫了 OAuth 登入</p><p>大部分的時間都是在 survey OAuth 是個怎麼樣的東西</p><p>還有網站要怎麼架起來之類的</p><p>比較麻煩的點是想要一個帳號能夠 link 多個 OAuth provider</p><p>像是原本用 facebook 註冊登入後</p><p>又想要 link 別的 social media (ex: github, google)</p><p>主要是參考這篇文章 <a href="https://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/" target="_blank" rel="noopener noreferrer">https://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/</a></p><p>把和 OAuth 有關的欄位移出 <code>User</code> table 建立一個新的 table <code>Identity</code></p><p>每個 <code>user</code> has_many <code>identities</code></p><p>主要的邏輯是使用者登入可以 link 其他 OAuth</p><p>如果登入 OAuth 成功就新增 identity 給那個 user</p><p>下次登入的時候就會靠 identity 來找到同一個 user 了</p><p>主要架設平台的搭配是 nginx + passenger + rvm</p><p>migrate 的方式我是直接先架一個 phpmyadmin 起來</p><p>先新增新網站的 schema</p><p>然後慢慢把舊網站的資料改成新網站的形式</p><p>最後再直接 import 到新網站的資料庫</p>]]></content:encoded>
            <category>ruby on rails</category>
        </item>
        <item>
            <title><![CDATA[Rails on Ubuntu]]></title>
            <link>https://bananaappletw.github.io/archives/Rails-on-Ubuntu</link>
            <guid>https://bananaappletw.github.io/archives/Rails-on-Ubuntu</guid>
            <pubDate>Thu, 22 Jun 2017 12:39:00 GMT</pubDate>
            <description><![CDATA[簡單記錄一下 Ruby on Rails server setup]]></description>
            <content:encoded><![CDATA[<p>簡單記錄一下 Ruby on Rails server setup
這裡用的是最新版的 Ubuntu 17.04 server 版
這篇會教你設定</p><ul><li>nginx</li><li>passenger</li><li>Let's Encrypt(https)</li><li>postfix(mail server)</li></ul><p>因為要設定 Let's Encrypt 和 postfix，所以要有一個 DNS 的 A Record 指向你的 ip 位置</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="passenger">Passenger<a href="#passenger" class="hash-link" aria-label="Direct link to Passenger" title="Direct link to Passenger">​</a></h2><p>這裡主要有三種方法可以選</p><p>詳細內容可以參考<a href="https://www.phusionpassenger.com/library/indepth/integration_modes.html" target="_blank" rel="noopener noreferrer">這篇</a></p><ol><li>Standalone mode</li></ol><p>只有 passenger</p><ol><li>Nginx integration mode</li></ol><p>passenger 和 nginx 整合</p><ol><li>Apache integration mode</li></ol><p>passenger 和 apache 整合</p><p>這裡選用的是第二種方法</p><p>因為 nginx 的效能比 apache 好</p><p>接著就開始安裝 nginx + passenger，大部分的步驟都跟<a href="https://www.phusionpassenger.com/library/install/nginx/install/oss/xenial/" target="_blank" rel="noopener noreferrer">這篇</a>一樣</p><p>稍微要注意一下 ubuntu 的 code name，像是 17.04 的 code name 是 Zesty
在加 apt 的 repo 的時候要稍微改一下 code name</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-passenger-packages">Install passenger packages<a href="#install-passenger-packages" class="hash-link" aria-label="Direct link to Install passenger packages" title="Direct link to Install passenger packages">​</a></h3><p><code>deb https://oss-binaries.phusionpassenger.com/apt/passenger xenial main</code> =&gt;
<code>deb https://oss-binaries.phusionpassenger.com/apt/passenger zesty main</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 561F9B9CAC40B2F7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install -y apt-transport-https ca-certificates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Add our APT repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo sh -c 'echo deb https://oss-binaries.phusionpassenger.com/apt/passenger zesty main &gt; /etc/apt/sources.list.d/passenger.list'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Install Passenger + Nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install -y nginx-extras passenger</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-the-passenger-nginx-module-and-restart-nginx">Enable the passenger nginx module and restart nginx<a href="#enable-the-passenger-nginx-module-and-restart-nginx" class="hash-link" aria-label="Direct link to Enable the passenger nginx module and restart nginx" title="Direct link to Enable the passenger nginx module and restart nginx">​</a></h3><p>修改 <code>/etc/nginx/nginx.conf</code> 檔案 將 <code># include /etc/nginx/passenger.conf</code> 取消註解</p><p>重啟 nginx</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo service nginx restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notice">Notice<a href="#notice" class="hash-link" aria-label="Direct link to Notice" title="Direct link to Notice">​</a></h3><p>另外網路上還有另一種裝 passenger 和 nginx 的方法</p><p>是自行下載下來編譯，所有的套件最後會放在 /opt 資料夾底下</p><p>我自己是不推薦這種方法，因為還要自己去設定 service script</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-encrypt">Let's Encrypt<a href="#lets-encrypt" class="hash-link" aria-label="Direct link to Let's Encrypt" title="Direct link to Let's Encrypt">​</a></h2><p>詳細可以參考<a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04" target="_blank" rel="noopener noreferrer">這篇</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="postfix">Postfix<a href="#postfix" class="hash-link" aria-label="Direct link to Postfix" title="Direct link to Postfix">​</a></h2><p>設定好 Let's Encrypt 後就會有 ssh key 了</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-postfix-package">Install postfix package<a href="#install-postfix-package" class="hash-link" aria-label="Direct link to Install postfix package" title="Direct link to Install postfix package">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install -y postfix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-postfix">Configure postfix<a href="#configure-postfix" class="hash-link" aria-label="Direct link to Configure postfix" title="Direct link to Configure postfix">​</a></h3><p>修改 <code>/etc/postfix/main.cf</code></p><p>原本應該是</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># TLS parameters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改成</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># TLS parameters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtpd_tls_cert_file=/etc/letsencrypt/live/bamboofox.nctucs.net/fullchain.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtpd_tls_key_file=/etc/letsencrypt/live/bamboofox.nctucs.net/privkey.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtp_tls_security_level=may</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">smtpd_tls_security_level=may</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我的 domain name 是 <code>bamboofox.nctucs.net</code>，這裡要修改成自己的 domain name</p><p><code>smtp_tls_security_level=may</code> 和 <code>smtpd_tls_security_level=may</code> 是讓 email 寄信和收信加密</p><p>將自己的 ip 也加進 relay 的 list</p><p>修改 <code>/etc/postfix/main.cf</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改成</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 140.113.209.18 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這邊很重要因為之後用 <code>devise</code> 寄信的時候會有 <code>certification</code> 的問題</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restart-postfix">Restart postfix<a href="#restart-postfix" class="hash-link" aria-label="Direct link to Restart postfix" title="Direct link to Restart postfix">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo service postfix restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-ruby-on-rails-project">Deploy ruby on rails project<a href="#deploy-ruby-on-rails-project" class="hash-link" aria-label="Direct link to Deploy ruby on rails project" title="Direct link to Deploy ruby on rails project">​</a></h2><p>參考<a href="https://gorails.com/deploy/ubuntu/16.04" target="_blank" rel="noopener noreferrer">這篇</a></p><p>直接從創 <code>deploy</code> 帳號開始做</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-deploy-user">Create deploy user<a href="#create-deploy-user" class="hash-link" aria-label="Direct link to Create deploy user" title="Direct link to Create deploy user">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo adduser deploy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo adduser deploy sudo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">su deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-rvm">Install rvm<a href="#install-rvm" class="hash-link" aria-label="Direct link to Install rvm" title="Direct link to Install rvm">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">\curl -sSL https://get.rvm.io | bash -s stable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo "source ~/.rvm/scripts/rvm" &gt;&gt; .bashrc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">source ~/.rvm/scripts/rvm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rvm install 2.4.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rvm use 2.4.0 --default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-basic-gems">Install basic gems<a href="#install-basic-gems" class="hash-link" aria-label="Direct link to Install basic gems" title="Direct link to Install basic gems">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gem install bundler</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gem install rails</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="show-passenger-config">Show passenger config<a href="#show-passenger-config" class="hash-link" aria-label="Direct link to Show passenger config" title="Direct link to Show passenger config">​</a></h3><p>執行指令</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">passenger-config about ruby-command</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>會得到</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">passenger-config was invoked through the following Ruby interpreter:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Command: /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Version: ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  To use in Apache: PassengerRuby /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  To use in Nginx : passenger_ruby /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  To use with Standalone: /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby /usr/bin/passenger start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這要用在等下的 nginx config</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-nvm">Install nvm<a href="#install-nvm" class="hash-link" aria-label="Direct link to Install nvm" title="Direct link to Install nvm">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export NVM_DIR="$HOME/.nvm"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; . "$NVM_DIR/nvm.sh" # This loads nvm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nvm install stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-yarn">Install yarn<a href="#install-yarn" class="hash-link" aria-label="Direct link to Install yarn" title="Direct link to Install yarn">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get update &amp;&amp; sudo apt-get install yarn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-basic-app">Create basic app<a href="#create-basic-app" class="hash-link" aria-label="Direct link to Create basic app" title="Direct link to Create basic app">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rails new myapp --webpack=react</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-on-nginx">Deploy on nginx<a href="#deploy-on-nginx" class="hash-link" aria-label="Direct link to Deploy on nginx" title="Direct link to Deploy on nginx">​</a></h3><p>修改 myapp 裡的 <code>config/secrets.yml</code></p><p>這裡 secret 可以使用 <code>rake secret</code> 產生</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">production:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  secret_key_base: d7913c3e87fadd4312ee1c5c1b13320caeecc72548f20b9122e2a1bf9ccdf0e9ecb86675168e578b5b3e960a81daa967c0081f69b082eb0c0e5df4b5810d71a9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改 <code>/etc/nginx/sites-available/default</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        # SSL configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        #</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        listen 443 ssl http2 default_server;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        listen [::]:443 ssl http2 default_server;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        include snippets/ssl-bamboofox.nctucs.net.conf;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        include snippets/ssl-params.conf;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        # Add these three lines</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        passenger_enabled on;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        server_name bamboofox.nctucs.net;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        root /home/deploy/myapp/public;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重啟 nginx</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo service nginx restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>ruby on rails</category>
        </item>
        <item>
            <title><![CDATA[Rails best practices]]></title>
            <link>https://bananaappletw.github.io/archives/Rails-Best-practice</link>
            <guid>https://bananaappletw.github.io/archives/Rails-Best-practice</guid>
            <pubDate>Fri, 21 Apr 2017 16:38:00 GMT</pubDate>
            <description><![CDATA[Rails best practices 是一個可以幫你檢查 Rails 專案架構的 gem]]></description>
            <content:encoded><![CDATA[<p>Rails best practices 是一個可以幫你檢查 Rails 專案架構的 gem</p><p>比如說你在 route 裡面增加了一些 routing path 但是你的 controller 沒有相對應的 action 的話</p><p>它就會幫你檢查出來，並且顯示警告訊息</p><h1>Installation</h1><p>Add following line to Gemfile.rb</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gem 'rails_best_practices', require: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gem 'rails_best_practices-rake_task', require: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>rails_best_practices</code> 是本身檢查架構的 gem
<code>rails_best_practices-rake_task</code> 是方便寫 rake task 的 gem</p><h1>Customize</h1><p>要是想要 custom 一些 config</p><p>可以打指令產生 config</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rails_best_practices -g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>會產生 <code>/config/rails_best_practices.yml</code></p><p>config 大概長得像這樣</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#MoveModelLogicIntoModelCheck: { use_count: 4 }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NeedlessDeepNestingCheck: { nested_count: 2 }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NotRescueExceptionCheck: { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NotUseDefaultRouteCheck: { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NotUseTimeAgoInWordsCheck: { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#OveruseRouteCustomizationsCheck: { customize_count: 3 }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ProtectMassAssignmentCheck: { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RemoveEmptyHelpersCheck: { }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#RemoveTabCheck: { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不想要檢查的 rule 可以直接註解掉即可</p><h1>Rake task</h1><p>如果要整合 travis ci 在每次 code push 的時候檢查架構的話，就要把 rails_best_practices 寫成 rake task，然後寫成 <code>rake</code> default 會跑的 task</p><p>在 <code>lib/tasks/rails_best_practices.rake</code> 加上這幾行</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">require 'rails_best_practices/rake_task'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RailsBestPractices::RakeTask.new</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然後修改一下 <code>Rakefile</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">require_relative 'config/application'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Rails.application.load_tasks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">task default: [:rails_best_practices]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這樣當你打 <code>rake</code> 的時候就會自動幫你檢查架構了</p><h1>References</h1><ul><li><a href="https://github.com/railsbp/rails_best_practices" target="_blank" rel="noopener noreferrer">Github</a></li></ul>]]></content:encoded>
            <category>ruby on rails</category>
        </item>
        <item>
            <title><![CDATA[Rubocop - Ruby static code analyzer]]></title>
            <link>https://bananaappletw.github.io/archives/Rubocop-Ruby-static-code-analyzer</link>
            <guid>https://bananaappletw.github.io/archives/Rubocop-Ruby-static-code-analyzer</guid>
            <pubDate>Sat, 04 Feb 2017 13:44:00 GMT</pubDate>
            <description><![CDATA[Rubocop 是一個 Ruby static code analyzer]]></description>
            <content:encoded><![CDATA[<p>Rubocop 是一個 Ruby static code analyzer
主要用來 format coding style</p><h1>Installation</h1><p>Add following line to Gemfile.rb</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gem 'rubocop', require: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Configuration</h1><p>Config 可以參考 github 上的 <a href="https://github.com/bbatsov/rubocop/tree/master/config" target="_blank" rel="noopener noreferrer">Config</a> 資料夾</p><p>裡面有三個檔案</p><ul><li>default.yml(主要的)</li><li>enabled.yml(預設開啟的)</li><li>disabled.yml(預設關掉的)</li></ul><p>改好後命名為 <code>.rubocop.yml</code> 放在 repo 裡，當你執行 <code>rubocop</code> 指令的時候就會讀取這個檔案的設定開始檢查語法</p><p>以下是我自己用的 Rules</p><p>把一些比較麻煩的 rules disable 掉了</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">AllCops:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Exclude:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 'db/migrate/*'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 'vendor/**/*'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Rails:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Rails/HasAndBelongsToMany:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Bundler/OrderedGems:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/ClassAndModuleChildren:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/ConditionalAssignment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/Documentation:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/FrozenStringLiteralComment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/Next:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Style/GuardClause:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metrics/LineLength:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metrics/BlockLength:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metrics/MethodLength:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Enabled: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metrics/AbcSize:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Enabled: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>rubocop 可以幫你自動修正一些語法，只要加上 <code>--auto-correct</code> 參數</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rubocop --auto-correct</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但是有時候想要一步一步修語法，我只想修正有關 <code>Style</code> 的語法，就要加上 <code>--only</code> 參數，其他以此類推</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rubocop --auto-correct --only Style</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rubocop --auto-correct --only HashSyntax</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rubocop --auto-correct --only StringLiterals</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Rake task</h1><p>如果要整合 travis ci 在每次 code push 的時候檢查語法的話，就要把 rubocop 寫成 rake task，然後寫成 <code>rake</code> default 會跑的 task</p><p>在 <code>lib/tasks/rubocop.rake</code> 加上這幾行</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">begin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  require 'rubocop/rake_task'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  RuboCop::RakeTask.new</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rescue LoadError # rubocop:disable Lint/HandleExceptions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然後修改一下 <code>Rakefile</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">require_relative 'config/application'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Rails.application.load_tasks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">task default: [:rubocop]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這樣當你打 <code>rake</code> 的時候就會自動幫你檢查語法了</p><p>要是有不懂的名詞可以查 <a href="http://www.rubydoc.info/github/bbatsov/rubocop/Rubocop/" target="_blank" rel="noopener noreferrer">Official document</a></p>]]></content:encoded>
            <category>ruby on rails</category>
            <category>rubocop</category>
            <category>ruby code formatter</category>
        </item>
        <item>
            <title><![CDATA[Concurrency vs parallelism]]></title>
            <link>https://bananaappletw.github.io/archives/concurrency-vs-parallelism</link>
            <guid>https://bananaappletw.github.io/archives/concurrency-vs-parallelism</guid>
            <pubDate>Wed, 01 Feb 2017 19:48:00 GMT</pubDate>
            <description><![CDATA[主要記錄一下兩者的差別]]></description>
            <content:encoded><![CDATA[<p>主要記錄一下兩者的差別</p><p>有興趣的話可以看一下這個 <a href="https://talks.golang.org/2012/waza.slide#1" target="_blank" rel="noopener noreferrer">talk</a></p><p>簡單摘錄一下裡面的重點</p><p>像是這兩句就道出了主要的差別</p><blockquote><p>Concurrency is about dealing with lots of things at once.
Parallelism is about doing lots of things at once.</p></blockquote><p>Concurrency 是一種概念，意思是說你能一次做很多事
Parallelism 則是其中一種實踐這種概念的做法</p><p>這個 talk 裡舉的例子很好理解</p><p>今天有一群 gopher ( golang 的吉祥物 )，可以想像每隻 gopher 就是一個 task (這裡指的是 Linux 裡的 process 或是 thread 的通稱)，它們要去燒書，書就是我們想要執行的程式。</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple1.jpg" class="img_ev3q"></p><p>當然我們會想要程式能夠執行得更快，所以增加了一個 gopher</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple3.jpg" class="img_ev3q"></p><p>但是沒有用，gopher 也需要有相對的工具 ( 推車 ) 才能夠改善效率，這裡的推車可以類比為有限的資源，像是 cpu bus</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple2.jpg" class="img_ev3q"></p><p>有車了!，但是必須考慮 synchronization 的問題，比如說 A 書必須比 B 書早燒，但是由於有多個 gopher 在燒書，所以有可能發生 B 書比 A 書早燒的情況</p><p>好那要是我們把書都分成 independent 的情況那這個問題是不是就解決了</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple4.jpg" class="img_ev3q"></p><p>那講到這裡就可以開始解釋，concurrency 和 parallelism 的差異了</p><h1>Concurrency</h1><p>concurrency 是一種概念，是說將一個工作分成很多個獨立不影響的片段並去執行</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple2.jpg" class="img_ev3q"></p><h1>Parallelism</h1><p>parallelism 則是說，現在我的 CPU 核心不只一顆，既然工作是獨立的，那我就可以同時去做這些工作，所以有機會發生，兩堆不同的書，在同一時間被拿去燒</p><p><img loading="lazy" src="https://talks.golang.org/2012/waza/gophersimple4.jpg" class="img_ev3q"></p>]]></content:encoded>
            <category>review</category>
        </item>
        <item>
            <title><![CDATA[Preview file using send_file]]></title>
            <link>https://bananaappletw.github.io/archives/Preview-file-using-send-file</link>
            <guid>https://bananaappletw.github.io/archives/Preview-file-using-send-file</guid>
            <pubDate>Thu, 05 Jan 2017 16:15:00 GMT</pubDate>
            <description><![CDATA[在 Ruby on rails 裡面]]></description>
            <content:encoded><![CDATA[<p>在 Ruby on rails 裡面</p><p>通常都是因為要做檔案權限控管</p><p>所以才會使用 <code>send_file</code> 這個 method</p><p>如果不需要做檔案下載的權限控管的話</p><p>直接把檔案放在 public 資料夾即可</p><p>有 access control 的檔案下載可以參考這篇 <a href="https://github.com/carrierwaveuploader/carrierwave/wiki/how-to:-secure-upload" target="_blank" rel="noopener noreferrer">carrierwave secure upload</a>
這樣做完後你的 model 裡就會有一個 download method</p><p>來幫你讀檔再用 <code>send_file</code> 來送出去</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appcontrollerschallenges_controllerrb"><code>app/controllers/challenges_controller.rb</code><a href="#appcontrollerschallenges_controllerrb" class="hash-link" aria-label="Direct link to appcontrollerschallenges_controllerrb" title="Direct link to appcontrollerschallenges_controllerrb">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def download</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  send_file file_path, disposition: 'inline'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重點有兩個</p><ol><li><code>:disposition</code> 參數用來指定是 <code>inline</code> 還是 <code>attachment</code>，default 是 <code>attachment</code>，所以要指定成 <code>inline</code></li><li>設定 <code>:type</code>，設定 HTTP content type，瀏覽器知道要怎麼呈現這個檔案，就是所謂的 <code>preview</code>，通常這個參數可以不用設，它會自動從 <code>:filename</code> 裡抓取 file extension 並選擇適當的 MIME type 當作 HTTP content type</li></ol><p>#<!-- -->Reference</p><ul><li><a href="http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file" target="_blank" rel="noopener noreferrer">send_file</a></li></ul>]]></content:encoded>
            <category>ruby on rails</category>
            <category>send_file</category>
        </item>
        <item>
            <title><![CDATA[db/seeds for carrierwave]]></title>
            <link>https://bananaappletw.github.io/archives/db-seeds-for-carrierwave</link>
            <guid>https://bananaappletw.github.io/archives/db-seeds-for-carrierwave</guid>
            <pubDate>Wed, 04 Jan 2017 13:58:00 GMT</pubDate>
            <description><![CDATA[這篇主要是紀錄對 Carrierwave 寫 db/seeds 的方法]]></description>
            <content:encoded><![CDATA[<p>這篇主要是紀錄對 Carrierwave 寫 <code>db/seeds</code> 的方法</p><h1>單一檔案</h1><p>Model 是 Material
其中 attachment 欄位是紀錄檔案的欄位</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appmodelsmaterialrb"><code>app/models/material.rb</code><a href="#appmodelsmaterialrb" class="hash-link" aria-label="Direct link to appmodelsmaterialrb" title="Direct link to appmodelsmaterialrb">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Material &lt; ApplicationRecord</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  mount_uploader :attachment, AttachmentUploader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通常會把測試的檔案放在 <code>/test/fixtures/</code> 資料夾下</p><p>我有一個檔案路徑在</p><ul><li><code>/test/fixtures/magic</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbseedsrb"><code>db/seeds.rb</code><a href="#dbseedsrb" class="hash-link" aria-label="Direct link to dbseedsrb" title="Direct link to dbseedsrb">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">material = Material.new()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">material.attachment = File.new(File.join("test/fixtures/files/","magic"))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">material.save!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>多個檔案</h1><p>Database 是使用 sqlite</p><p>所以是用 string 格式來存檔案資訊</p><p><a href="https://github.com/carrierwaveuploader/carrierwave/issues/1755" target="_blank" rel="noopener noreferrer">官方 issue</a></p><p>我有兩個檔案路徑在</p><ul><li><code>/test/fixtures/magic</code></li><li><code>/test/fixtures/gdb.txt</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appmodelschallengerb"><code>app/models/challenge.rb</code><a href="#appmodelschallengerb" class="hash-link" aria-label="Direct link to appmodelschallengerb" title="Direct link to appmodelschallengerb">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Challenge &lt; ApplicationRecord</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  mount_uploaders :attachments, AttachmentUploader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbseedsrb-1"><code>db/seeds.rb</code><a href="#dbseedsrb-1" class="hash-link" aria-label="Direct link to dbseedsrb-1" title="Direct link to dbseedsrb-1">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">challenge = Challenge.new()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attachments = [ "magic", "gdb.txt" ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attachments.map! do | attachment |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  attachment = File.new(File.join("test/fixtures/files/",attachment))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">challenge.attachments = attachments</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">challenge.save!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>ruby on rails</category>
            <category>carrierwave</category>
        </item>
        <item>
            <title><![CDATA[N+1 issue]]></title>
            <link>https://bananaappletw.github.io/archives/N-1-issue</link>
            <guid>https://bananaappletw.github.io/archives/N-1-issue</guid>
            <pubDate>Mon, 05 Dec 2016 14:32:00 GMT</pubDate>
            <description><![CDATA[比如說你現在有兩個 Database Models]]></description>
            <content:encoded><![CDATA[<p>比如說你現在有兩個 Database Models</p><p>一個是 Cars 另一個是 Wheels</p><p>他們的關係會是 one to many</p><p>一台車會有多個輪子</p><p>每個輪子都會有一個 column: car_id 指向一台車</p><p>那比如說我今天想要得到每台車的資訊和每台車有多少個輪子</p><p>假設資料庫裡有 <strong>N</strong> 台車</p><p>先搜尋所有的車 (query count: <strong>1</strong>)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM Cars;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在對每台車搜尋所擁有的輪子 (query count: <strong>N</strong>)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM Wheels WHERE car_id = ?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>總共的 Query 數是 <strong>N+1</strong></p><p>那解決的方法就是</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM Cars;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM Wheels;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>就能把原本的 Query 數 <strong>N+1</strong> 縮減到 <strong>2</strong></p><h1>Reference</h1><ul><li><a href="http://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue" target="_blank" rel="noopener noreferrer">stack overflow</a></li><li><a href="https://secure.phabricator.com/book/phabcontrib/article/n_plus_one/" target="_blank" rel="noopener noreferrer">google search</a></li></ul>]]></content:encoded>
            <category>database</category>
        </item>
        <item>
            <title><![CDATA[Virtualization]]></title>
            <link>https://bananaappletw.github.io/archives/Virtualization</link>
            <guid>https://bananaappletw.github.io/archives/Virtualization</guid>
            <pubDate>Fri, 18 Nov 2016 15:07:00 GMT</pubDate>
            <description><![CDATA[紀錄一下自己最近研讀虛擬化技術的筆記]]></description>
            <content:encoded><![CDATA[<p>紀錄一下自己最近研讀虛擬化技術的筆記</p><p>因為最近要寫有關 qemu 的東西順便學習一下</p><p>在介紹之前讓我們先了解一下一些名詞</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hypervisor--virtual-machine-monitor-">Hypervisor ( virtual machine monitor )<a href="#hypervisor--virtual-machine-monitor-" class="hash-link" aria-label="Direct link to Hypervisor ( virtual machine monitor )" title="Direct link to Hypervisor ( virtual machine monitor )">​</a></h2><p>用來管理和執行 virtual machine 的軟體</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="host-machine">Host machine<a href="#host-machine" class="hash-link" aria-label="Direct link to Host machine" title="Direct link to Host machine">​</a></h2><p>用來執行 hypervisor 的機器</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="guest-machine">Guest machine<a href="#guest-machine" class="hash-link" aria-label="Direct link to Guest machine" title="Direct link to Guest machine">​</a></h2><p>被 hypervisor 管理的機器</p><p>比如說你在你的電腦上使用 Virtual Box 開了兩個虛擬機，一個是 Windows 10，一個是 Ubuntu</p><p>那 Virtual Box 就是 hypervisor，你的電腦就是 Host machine，而 Windows 10 和 Ubuntu 就是 Guest machine</p><p>我們通常會將 Guest machine 稱為 instance，instance 可以是不同的作業系統</p><p>那跟這個對比的就是 Operating-system-level virtualization，在這通常會將 Guest machine 稱作是 container，container 只能是同一種的作業系統，但是 user space 可以不一樣，像是不同的 Linux distribution 用的是同一個 kernel</p><p>那現在正式開始介紹 hypervisor 的類型</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hypervisor-type">Hypervisor Type<a href="#hypervisor-type" class="hash-link" aria-label="Direct link to Hypervisor Type" title="Direct link to Hypervisor Type">​</a></h2><p><img loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/e/e1/Hyperviseur.png" class="img_ev3q"></p><ul><li>Type-1, native or bare-metal hypervisor</li></ul><p>這種類型的 hypervisor 可以在硬體上執行</p><p>Citrix XenServer, Microsoft Hyper-V and VMware ESX/ESXi 屬於這種</p><ul><li>Type-2 or hosted hypervisors</li></ul><p>Hypervisor 被當成 Host machine 的一隻 process 執行</p><p>VMware Workstation, VMware Player, VirtualBox, Parallels Desktop for Mac and QEMU 屬於這種</p><p>現在 Type-1 和 Type-2 兩者之間的界線越來越模糊，因為原本是 Type-2 的 virtual machine 鑒於效能考量紛紛跨入 Type-1，像是 Linux 的 KVM 就可以被歸類在兩種不同的 hypervisor</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-machine">Virtual machine<a href="#virtual-machine" class="hash-link" aria-label="Direct link to Virtual machine" title="Direct link to Virtual machine">​</a></h2><p>我們所謂的 virtual machine 主要分為以下三種</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-machine-type">Virtual machine type<a href="#virtual-machine-type" class="hash-link" aria-label="Direct link to Virtual machine type" title="Direct link to Virtual machine type">​</a></h2><ul><li>System virtual machines ( Full virtualization )</li><li>Hardware-assisted virtualization</li><li>Operating-system-level virtualization</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-virtual-machines--full-virtualization-">System virtual machines ( Full virtualization )<a href="#system-virtual-machines--full-virtualization-" class="hash-link" aria-label="Direct link to System virtual machines ( Full virtualization )" title="Direct link to System virtual machines ( Full virtualization )">​</a></h2><p>提供了虛擬化整個作業系統的功能</p><p>Parallels Workstation, Parallels Desktop for Mac, VirtualBox, Virtual Iron, Oracle VM, Virtual PC, Virtual Server, Hyper-V, VMware Workstation, VMware Server (discontinued, formerly called GSX Server), VMware ESXi, QEMU, Adeos, Mac-on-Linux</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-assisted-virtualization">Hardware-assisted virtualization<a href="#hardware-assisted-virtualization" class="hash-link" aria-label="Direct link to Hardware-assisted virtualization" title="Direct link to Hardware-assisted virtualization">​</a></h2><p>透過硬體的支援，使得效率提高</p><p>KVM, VMware Workstation, VMware Fusion, Hyper-V, Windows Virtual PC, Xen, Parallels Desktop for Mac, Oracle VM Server for SPARC, VirtualBox and Parallels Workstation</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operating-system-level-virtualization">Operating-system-level virtualization<a href="#operating-system-level-virtualization" class="hash-link" aria-label="Direct link to Operating-system-level virtualization" title="Direct link to Operating-system-level virtualization">​</a></h2><p>這種技術是指 kernel 作業系統本身提供的虛擬化功能，像是 Linux container 簡稱為 LXC，Docker 在 0.9 版前其實就是 LXC 的前端</p><h1>Reference:</h1><ul><li><a href="https://en.wikipedia.org/wiki/Virtual_machine" target="_blank" rel="noopener noreferrer">Virtual machine wiki</a></li><li><a href="https://en.wikipedia.org/wiki/Hypervisor" target="_blank" rel="noopener noreferrer">Hypervisor wiki</a></li></ul>]]></content:encoded>
            <category>virtualization</category>
        </item>
        <item>
            <title><![CDATA[Javascript function paramter default  value]]></title>
            <link>https://bananaappletw.github.io/archives/Javascript-function-paramter-default-value</link>
            <guid>https://bananaappletw.github.io/archives/Javascript-function-paramter-default-value</guid>
            <pubDate>Wed, 16 Nov 2016 22:56:00 GMT</pubDate>
            <description><![CDATA[function f(s)]]></description>
            <content:encoded><![CDATA[<p>function f(s)
{
var a = (s == undefined) ? 'qq' : s;
}</p><p>Can be rewrited as following code</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">function f(s)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var a = s || 'qq';</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First statement will evaluate value of s is true or not.</p><p>If true, s is assigned to a.</p><p>Else, statement will find next value a.k.a. 'qq'.</p><p>'qq' will be assigned to a.</p><p>For further, you could directly write code like this in ES6.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">function f(s = 'qq')</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>javascript</category>
        </item>
        <item>
            <title><![CDATA[My favorite script]]></title>
            <link>https://bananaappletw.github.io/archives/My-favorite-script</link>
            <guid>https://bananaappletw.github.io/archives/My-favorite-script</guid>
            <pubDate>Fri, 10 Jun 2016 20:35:00 GMT</pubDate>
            <description><![CDATA[Format code]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="format-code">Format code<a href="#format-code" class="hash-link" aria-label="Direct link to Format code" title="Direct link to Format code">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">astyle --style=allman --unpad-paren --pad-oper --convert-tabs --pad-header --delete-empty-lines [source_code_file]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Full document can be found here.</p><p><a href="http://astyle.sourceforge.net/astyle.html" target="_blank" rel="noopener noreferrer">http://astyle.sourceforge.net/astyle.html</a></p>]]></content:encoded>
            <category>script</category>
        </item>
        <item>
            <title><![CDATA[I don't know c language]]></title>
            <link>https://bananaappletw.github.io/archives/I-don-t-know-c-language</link>
            <guid>https://bananaappletw.github.io/archives/I-don-t-know-c-language</guid>
            <pubDate>Thu, 21 Apr 2016 21:12:00 GMT</pubDate>
            <description><![CDATA[allocate string by array or pointer]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="allocate-string-by-array-or-pointer">allocate string by array or pointer<a href="#allocate-string-by-array-or-pointer" class="hash-link" aria-label="Direct link to allocate string by array or pointer" title="Direct link to allocate string by array or pointer">​</a></h2><p>What's difference between them?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#include&lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char a[] = "apple";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char *b = "apple";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="answer">Answer<a href="#answer" class="hash-link" aria-label="Direct link to Answer" title="Direct link to Answer">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char a[] = "apple";</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When string is allocated by array, all the characters are saved in the stack.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char *b = "apple";</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When string is allocated by pointer, only pointer is saved in the stack, and it points to the string, which is saved in the read-only section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-argument-array-or-pointer">function argument array or pointer<a href="#function-argument-array-or-pointer" class="hash-link" aria-label="Direct link to function argument array or pointer" title="Direct link to function argument array or pointer">​</a></h2><p>What's difference between them?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#include&lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void func1(char * s)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    printf("%s",s);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void func2(char s[])</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    printf("%s",s);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    func1("apple");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    func2("apple");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In book "The c programming language 2nd"</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">As formal parameters in a function definition,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char s[];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    char *s;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">are equivalent; we prefer the latter because it says more explicitly that the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">parameter is a pointer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But in which situation, we prefer to use array argument?
In one mail to linux kernel mentioned that</p><p><a href="https://lkml.org/lkml/2015/9/3/499" target="_blank" rel="noopener noreferrer">https://lkml.org/lkml/2015/9/3/499</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">The "array as function argument" syntax is occasionally useful</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(particularly for the multi-dimensional array case), so I very much</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">understand why it exists, I just think that in the kernel we'd be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">better off with the rule that it's against our coding practices.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sizeof-is-an-operator">sizeof is an operator<a href="#sizeof-is-an-operator" class="hash-link" aria-label="Direct link to sizeof is an operator" title="Direct link to sizeof is an operator">​</a></h2><p>sizeof value is determined in compile time.</p><p>sizeof is only correctly used in two places.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="array">array<a href="#array" class="hash-link" aria-label="Direct link to array" title="Direct link to array">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">char s[10];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">printf("%zu",sizeof(s));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="type">type<a href="#type" class="hash-link" aria-label="Direct link to type" title="Direct link to type">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">char* s="hello";</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">printf("%zu",sizeof(s));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">printf("%zu",sizeof(char *));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// sizeof(variable) == sizeof(variable type)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://en.wikipedia.org/wiki/Sizeof" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Sizeof</a></p>]]></content:encoded>
            <category>c</category>
        </item>
        <item>
            <title><![CDATA[alignment and round number using & and ~]]></title>
            <link>https://bananaappletw.github.io/archives/alignment-and-round-number-using-and</link>
            <guid>https://bananaappletw.github.io/archives/alignment-and-round-number-using-and</guid>
            <pubDate>Thu, 31 Mar 2016 02:02:00 GMT</pubDate>
            <description><![CDATA[While tracing malloc.c code, I found some interesting bitwise operation.]]></description>
            <content:encoded><![CDATA[<p>While tracing malloc.c code, I found some interesting bitwise operation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#define MALLOC_ALIGN_MASK      (MALLOC_ALIGNMENT - 1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#define MINSIZE  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  (unsigned long)(((MIN_CHUNK_SIZE+MALLOC_ALIGN_MASK) &amp; ~MALLOC_ALIGN_MASK))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I found the answer in the stackoverflow.</p><p><a href="http://stackoverflow.com/questions/14561402/how-is-this-size-alignment-working" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/questions/14561402/how-is-this-size-alignment-working</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">All powers of two (1, 2, 4, 8, 16, 32...) can be aligned by simple a and operation.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This gives the size rounded down:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">size &amp;= ~(alignment - 1); </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">or if you want to round up:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">size = (size + alignment-1) &amp; ~(alignment-1);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>MINSIZE</strong> macro trying to find largest number alignment to <strong>MALLOC_ALIGNMENT</strong></p><p>For example</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">MIN_CHUNK_SIZE = 25;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MALLOC_ALIGNMENT = 8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MALLOC_ALIGN_MASK = 8-1 = 7;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MINSIZE = (25+7) &amp; ~7 = 32;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>More</h1><p><a href="https://graphics.stanford.edu/%5C~seander/bithacks.html" target="_blank" rel="noopener noreferrer">https://graphics.stanford.edu/\~seander/bithacks.html</a></p>]]></content:encoded>
            <category>linux kernel</category>
        </item>
        <item>
            <title><![CDATA[2016 review]]></title>
            <link>https://bananaappletw.github.io/archives/review</link>
            <guid>https://bananaappletw.github.io/archives/review</guid>
            <pubDate>Tue, 22 Mar 2016 13:48:00 GMT</pubDate>
            <description><![CDATA[TODO list:]]></description>
            <content:encoded><![CDATA[<p>TODO list:</p><ul class="contains-task-list containsTaskList_mC6p"><li>[O]<!-- --> K&amp;R The C Programming Language (Second Edition)</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Robert Love linux kernel development (Third Edition)</li><li>[O][sqlab website]<!-- -->(<a href="http://sqlab.github.io/" target="_blank" rel="noopener noreferrer">http://sqlab.github.io/</a>)</li></ul>]]></content:encoded>
            <category>review</category>
        </item>
        <item>
            <title><![CDATA[how python pass argument in function]]></title>
            <link>https://bananaappletw.github.io/archives/how-python-pass-argument-in-function</link>
            <guid>https://bananaappletw.github.io/archives/how-python-pass-argument-in-function</guid>
            <pubDate>Tue, 22 Mar 2016 13:47:00 GMT</pubDate>
            <description><![CDATA[網路上看到蠻多說法的像是]]></description>
            <content:encoded><![CDATA[<p>網路上看到蠻多說法的像是
call by value vs call by reference
事實上 call by assignment 才是 python 傳遞參數的方式
主要要介紹 python 的 object
像是以下這行程式碼</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">a = 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>a 就是一個 reference 指向數值為 1 的 PyIntObject
就像是 c 裡面的指標指向一個變數一樣
繼續看一段程式碼</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def fun(a):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">11211096</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">11211096</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那這裡實際上內部是怎麼做的呢?
傳進去 fun function 裡的事實上是 copy of reference to PyIntObject
事實上和還沒傳進去的 a 是兩個不同的 reference 指向同一個 object
id 這個函式 return 的是 object 的位置
所以兩個的值才會一樣
要是有興趣可以看 cpython 裡 id function 的實作</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">static PyObject *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">builtin_id(PyModuleDef *self, PyObject *v)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*[clinic end generated code: output=0aa640785f697f65 input=5a534136419631f4]*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return PyLong_FromVoidPtr(v);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我們修改一下程式碼</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def fun(a):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a += 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">41632088</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">41632088</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">41632064</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">41632088</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我們會發覺 id(a) 在 fun function 前後都不會變
這是因為傳進去 function 裡的是 copy of reference to object
所以不會影響到原本的 reference
但是在 fun function 裡的 a
經過 +=1 後 id 改變了
這是因為 int 是 immutable type
當你要嘗試改 immutable type 的 variable 的時候
他會先產生一個新的 object 再將你的 reference 指向那個 object
要是是mutable variable呢?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def fun(a):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a.append(1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140347177386784</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[1]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140347177386784</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[1]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140347177386784</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>執行後會發現 id 都不變
這是因為 mutable variable 的處理方式和 immutable 不同
他是將 reference 指到的 object 擴充而不是重新 assign 一個
那 mutable variable 的 assign 呢?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def fun(a):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a.append(1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print id(a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140318457238304</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[1]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140318457251672</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">140318457238304</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這裡 mutable variable 就和 immutable variable 一樣了
直接捨棄了原本的 object 指向一個新的 object
所以原本傳進去的也是 copy of reference to object
原本的 a 不會受到影響</p><p>Reference:</p><ul><li><a href="https://docs.python.org/2/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference" target="_blank" rel="noopener noreferrer">call by assignment</a></li><li><a href="https://github.com/python/cpython/blob/master/Python%2Fbltinmodule.c#L1092" target="_blank" rel="noopener noreferrer">cpython</a></li></ul>]]></content:encoded>
            <category>python</category>
        </item>
        <item>
            <title><![CDATA[qira introduction]]></title>
            <link>https://bananaappletw.github.io/archives/qira-introduction</link>
            <guid>https://bananaappletw.github.io/archives/qira-introduction</guid>
            <pubDate>Tue, 22 Mar 2016 13:42:00 GMT</pubDate>
            <description><![CDATA[image from qira.me website]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://qira.me/img/first_splash.png" alt="image from qira.me website" class="img_ev3q"></p><hr><ul><li>QIRA is timeless debugger</li><li>Fullname is QEMU Interactive Runtime Analyser</li><li>QIRA was initially developed at Google by George Hotz. Work continues at CMU.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qira-website">qira website<a href="#qira-website" class="hash-link" aria-label="Direct link to qira website" title="Direct link to qira website">​</a></h2><p><a href="http://qira.me/" target="_blank" rel="noopener noreferrer">http://qira.me/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qira-github-repository">qira github repository<a href="#qira-github-repository" class="hash-link" aria-label="Direct link to qira github repository" title="Direct link to qira github repository">​</a></h2><p><a href="https://github.com/BinaryAnalysisPlatform/qira" target="_blank" rel="noopener noreferrer">https://github.com/BinaryAnalysisPlatform/qira</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/BinaryAnalysisPlatform/qira.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd qira/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./install.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to run with other architecture, run the following command</p><p>It will fetch other architecture's library</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./fetchlib.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2><p><img loading="lazy" src="http://i.imgur.com/N5EpyfB.png" alt="Usage" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget http://train.cs.nctu.edu.tw/files/magic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod +x ./magic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">qira  -s ./magic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>open other terminal and type</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">nc 0 4000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>use this terminal to interactive with program</p><p>You could trace the instructions with web browser on http://localhost:3002/</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="keyboard-shortcuts-in-webclientcontrolsjs">Keyboard Shortcuts in web/client/controls.js<a href="#keyboard-shortcuts-in-webclientcontrolsjs" class="hash-link" aria-label="Direct link to Keyboard Shortcuts in web/client/controls.js" title="Direct link to Keyboard Shortcuts in web/client/controls.js">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">j -- next invocation of instruction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">k -- prev invocation of instruction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shift-j -- next toucher of data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shift-k -- prev toucher of data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">m -- go to return from current function</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">, -- go to start of current function</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">z -- zoom out max on vtimeline</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">l -- set iaddr to instruction at current clnum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">left  -- -1 fork</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">right -- +1 fork</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">up    -- -1 clnum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">down  -- +1 clnum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">esc -- back</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shift-c -- clear all forks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">n -- rename instruction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shift-n -- rename data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">; -- add comment at instruction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shift-; -- add comment at data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">g -- go to change, address, or name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">space -- toggle flat/function view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">p -- analyze function at iaddr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">c -- make code at iaddr, one instruction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a -- make ascii at iaddr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">d -- make data at iaddr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">u -- make undefined at iaddr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="further">Further<a href="#further" class="hash-link" aria-label="Direct link to Further" title="Direct link to Further">​</a></h2><p>qira is made of following compoments</p><ul><li>qemu</li><li>flask</li><li>python</li><li>qiradb</li></ul><p>qemu is used to emulate other architecture</p><p>Flask is a microframework for Python based on Werkzeug, Jinja 2 and good intentions</p><p>The most code of qira is written by Python</p><p>qiradb is a python package deal with the instruction trace</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-ida-plugin">Working with ida plugin<a href="#working-with-ida-plugin" class="hash-link" aria-label="Direct link to Working with ida plugin" title="Direct link to Working with ida plugin">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-environment">Testing environment<a href="#testing-environment" class="hash-link" aria-label="Direct link to Testing environment" title="Direct link to Testing environment">​</a></h3><ul><li>Windows 10</li><li>Vmware workstation Pro 12 with Ubuntu 15.10</li></ul><p>Install qira 1.2 on Ubuntu 15.10 and port-forwarding 3002 port</p><p>Copy qira_ida66_windows.p64 and qira_ida66_windows.plw from qira/ida/bin/ to ida pro plugins/ directory</p><p>Open Chrome and IDA PRO on windows 10</p><p>It should work like this</p><p><img loading="lazy" src="http://qira.me/img/ida.png" alt="ida plugin" class="img_ev3q"></p>]]></content:encoded>
            <category>qira</category>
            <category>ctf</category>
        </item>
        <item>
            <title><![CDATA[useful tools]]></title>
            <link>https://bananaappletw.github.io/archives/useful-tools</link>
            <guid>https://bananaappletw.github.io/archives/useful-tools</guid>
            <pubDate>Tue, 22 Mar 2016 13:40:00 GMT</pubDate>
            <description><![CDATA[hackmd]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hackmd">hackmd<a href="#hackmd" class="hash-link" aria-label="Direct link to hackmd" title="Direct link to hackmd">​</a></h2><p><a href="https://hackmd.io/" target="_blank" rel="noopener noreferrer">https://hackmd.io/</a></p><p>還蠻推薦 hackmd 的</p><p>當初是看到 lab 的同學在用</p><p>他其中一個功能很好用就是上傳圖片</p><p>他會把圖片直接上傳到 <a href="http://imgur.com/" target="_blank" rel="noopener noreferrer">http://imgur.com/</a></p><p>再用 markdown 的寫法將圖片插入</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">![](圖片網址)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hackpad">hackpad<a href="#hackpad" class="hash-link" aria-label="Direct link to hackpad" title="Direct link to hackpad">​</a></h2><p><a href="https://hackpad.com/" target="_blank" rel="noopener noreferrer">https://hackpad.com/</a></p><p>這應該是最多人聽過支援 markdown 語法的協作平台</p><p>就不介紹了</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stackeditor">stackeditor<a href="#stackeditor" class="hash-link" aria-label="Direct link to stackeditor" title="Direct link to stackeditor">​</a></h2><p><a href="https://stackedit.io/editor#" target="_blank" rel="noopener noreferrer">https://stackedit.io/editor#</a></p><p>線上的 markdown 編輯器</p><p>可以和 google drive 和 dropbox 使用</p><p>如果有再寫 google blogger 的可以用這個</p><p>stackeditor 寫完後就可以直接 publish 算是一個不錯的功能</p><p>缺點是沒有辦法和別人共同編輯</p><h1>Code Formatter</h1><ul><li>python: yapf</li></ul><p><a href="https://github.com/google/yapf" target="_blank" rel="noopener noreferrer">https://github.com/google/yapf</a></p><ul><li>C/C++: astyle</li></ul><p><a href="http://astyle.sourceforge.net/" target="_blank" rel="noopener noreferrer">http://astyle.sourceforge.net/</a></p><h1>CTF 相關</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kali-linux">Kali Linux<a href="#kali-linux" class="hash-link" aria-label="Direct link to Kali Linux" title="Direct link to Kali Linux">​</a></h2><p><a href="https://www.kali.org/" target="_blank" rel="noopener noreferrer">https://www.kali.org/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gdb">gdb<a href="#gdb" class="hash-link" aria-label="Direct link to gdb" title="Direct link to gdb">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gdb-peda">gdb peda<a href="#gdb-peda" class="hash-link" aria-label="Direct link to gdb peda" title="Direct link to gdb peda">​</a></h2><p><a href="https://github.com/longld/peda" target="_blank" rel="noopener noreferrer">https://github.com/longld/peda</a></p><p>讓你的 gdb 介面變好看</p><p>還多的一些好用的 funtcion</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qira">qira<a href="#qira" class="hash-link" aria-label="Direct link to qira" title="Direct link to qira">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="strace">strace<a href="#strace" class="hash-link" aria-label="Direct link to strace" title="Direct link to strace">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ltrace">ltrace<a href="#ltrace" class="hash-link" aria-label="Direct link to ltrace" title="Direct link to ltrace">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oda">ODA<a href="#oda" class="hash-link" aria-label="Direct link to ODA" title="Direct link to ODA">​</a></h2><p><a href="https://www.onlinedisassembler.com/odaweb/" target="_blank" rel="noopener noreferrer">https://www.onlinedisassembler.com/odaweb/</a></p>]]></content:encoded>
            <category>tool</category>
        </item>
        <item>
            <title><![CDATA[symbolic exection introduction]]></title>
            <link>https://bananaappletw.github.io/archives/symbolic-exection-introduction</link>
            <guid>https://bananaappletw.github.io/archives/symbolic-exection-introduction</guid>
            <pubDate>Tue, 23 Feb 2016 09:19:00 GMT</pubDate>
            <description><![CDATA[*]]></description>
            <content:encoded><![CDATA[<hr><h1>Defenition</h1><p>Symbolic execution (also symbolic evaluation) is a means of analyzing a program to determine what inputs cause each part of a program to execute.</p><p>An interpreter follows the program, assuming symbolic values for inputs rather than obtaining actual inputs as normal execution of the program would, a case of abstract interpretation.</p><p>It thus arrives at expressions in terms of those symbols for expressions and variables in the program, and constraints in terms of those symbols for the possible outcomes of each conditional branch.</p><h1>Example</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">int f() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  y = read();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  z = y * 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (z == 12) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fail();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    printf("OK");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>During "concrete" execution, the program would read a concrete input value (e.g., 5) and assign it to y.</p><p>During symbolic execution, the program reads a symbolic value (e.g., λ) and assigns it to y.</p><p>The program would then proceed with the multiplication and assign λ <em> 2 to z. When reaching the if statement, it would evaluate λ </em> 2 == 12.</p><p>At this point of the program, λ could take any value, and symbolic execution can therefore proceed along both branches, by "forking" two paths.</p><p>Each path get assigned a copy of the program state at the branch instruction as well as a path constraint.</p><p>When paths terminate (e.g., as a result of executing fail() or simply exiting), symbolic execution computes a concrete value for λ by solving the accumulated path constraints on each path.</p><h1>Limitations</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="path-explosion">Path Explosion<a href="#path-explosion" class="hash-link" aria-label="Direct link to Path Explosion" title="Direct link to Path Explosion">​</a></h2><p>Symbolically executing all feasible program paths does not scale to large programs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="program-dependent-efficacy">Program-Dependent Efficacy<a href="#program-dependent-efficacy" class="hash-link" aria-label="Direct link to Program-Dependent Efficacy" title="Direct link to Program-Dependent Efficacy">​</a></h2><p>Symbolic execution is used to reason about a program path-by-path which is an advantage over reasoning about a program input-by-input as other testing paradigms use (e.g. Dynamic program analysis).</p><p>However, if few inputs take the same path through the program, there is little savings over testing each of the inputs separately.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-interactions">Environment Interactions<a href="#environment-interactions" class="hash-link" aria-label="Direct link to Environment Interactions" title="Direct link to Environment Interactions">​</a></h2><p>Programs interact with their environment by performing system calls, receiving signals, etc.
Consistency problems may arise when execution reaches components that are not under control of the symbolic execution tool (e.g., kernel or libraries).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">int main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   FILE *fp = fopen("doc.txt");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   if (condition) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     fputs("some data", fp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     fputs("some other data", fp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   data = fgets(..., fp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This program opens a file and, based on some condition, writes different kind of data to the file. It then later reads back the written data. In theory, symbolic execution would fork two paths at line 5 and each path from there on would have its own copy of the file. The statement at line 11 would therefore return data that is consistent with the value of "condition" at line 5. In practice, file operations are implemented as system calls in the kernel, and are outside the control of the symbolic execution tool. The main approaches to address this challenge are:</p><p>Executing calls to the environment directly. The advantage of this approach is that it is simple to implement. The disadvantage is that the side effects of such calls will clobber all states managed by the symbolic execution engine. In the example above, the instruction at line 11 would return "some datasome other data" or "some other datasomedata" depending on the sequential ordering of the states.</p><p>Modeling the environment. In this case, the engine instruments the system calls with a model that simulates their effects and that keeps all the side effects in per-state storage. The advantage is that one would get correct results when symbolically executing programs that interact with the environment. The disadvantage is that one needs to implement and maintain many potentially complex models of system calls. Tools such as KLEE<!-- -->[<!-- -->5<!-- -->]<!-- --> and Cloud9 take this approach by implementing models for file system operations, sockets, IPC, etc.</p><p>Forking the entire system state. Symbolic execution tools based on virtual machines solve the environment problem by forking the entire VM state. For example, in S2E<!-- -->[<!-- -->6<!-- -->]<!-- --> each state is an independent VM snapshot that can be executed separately. This approach alleviates the need for writing and maintaining complex models and allows virtually any program binary to be executed symbolically. However, it has higher memory usage overheads (VM snapshots may be large).</p><h1>Tools</h1><table><thead><tr><th>Tool</th><th>It can analyze Arch/Lang</th><th>url</th></tr></thead><tbody><tr><td>KLEE</td><td>LLVM</td><td><a href="http://klee.github.io/" target="_blank" rel="noopener noreferrer">http://klee.github.io/</a></td></tr><tr><td>S2E</td><td>x86, x86-64, ARM / User and kernel-mode binaries</td><td><a href="http://s2e.epfl.ch" target="_blank" rel="noopener noreferrer">http://s2e.epfl.ch</a></td></tr><tr><td>Triton</td><td>x86 and x86-64</td><td><a href="http://triton.quarkslab.com" target="_blank" rel="noopener noreferrer">http://triton.quarkslab.com</a></td></tr><tr><td>angr</td><td>libVEX based</td><td><a href="http://angr.io/" target="_blank" rel="noopener noreferrer">http://angr.io/</a></td></tr></tbody></table><h1>Reference</h1><ul><li><a href="https://en.wikipedia.org/wiki/Symbolic_execution" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Symbolic_execution</a></li><li><a href="http://www.tutorialspoint.com/software_testing_dictionary/symbolic_execution.htm" target="_blank" rel="noopener noreferrer">http://www.tutorialspoint.com/software_testing_dictionary/symbolic_execution.htm</a></li></ul>]]></content:encoded>
        </item>
    </channel>
</rss>