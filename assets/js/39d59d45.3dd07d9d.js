"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5809],{29703:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/official-website-review","metadata":{"permalink":"/archives/official-website-review","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/official-website-review.md","source":"@site/archives/official-website-review.md","title":"Official website review","description":"\u9019\u6b21\u5b98\u7db2\u7684\u76ee\u7684\u662f\u8981\u505a\u51fa\u4e00\u500b\u975c\u614b\u7684\u7db2\u7ad9","date":"2019-07-03T02:35:06.000Z","formattedDate":"July 3, 2019","tags":[],"readingTime":12.875,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Official website review","date":"2019-07-03T02:35:06.000Z","categories":["computer science"],"tags":[]},"nextItem":{"title":"Welcome","permalink":"/archives/welcome"}},"content":"\u9019\u6b21\u5b98\u7db2\u7684\u76ee\u7684\u662f\u8981\u505a\u51fa\u4e00\u500b\u975c\u614b\u7684\u7db2\u7ad9\\n\\n\u7136\u5f8c\u63d0\u4f9b\u975e\u6280\u8853\u4eba\u54e1\u80fd\u5920\u5beb\u7a3f\u7136\u5f8c\u767c\u8868(\u5305\u542b\u4e0a\u50b3\u5716\u7247\u9084\u6709\u4e00\u4e9b\u6bd4\u8f03\u5ba2\u88fd\u5316\u7684\u6a23\u5f0f)\\n\\n\u9019\u7a2e\u6771\u897f\u6bd4\u8f03\u7cbe\u78ba\u7684\u540d\u8a5e\u662f Static Site Generators\\n\\n\u53ef\u4ee5\u53c3\u8003 [https://www.staticgen.com/](https://www.staticgen.com/ \\"https://www.staticgen.com/\\") \u770b\u770b\u6bcf\u500b\u6846\u67b6\u7684 star, issue, fork \u6578\u91cf\\n\\n\u770b\u770b\u9019\u4e9b\u6578\u503c\u7684\u8b8a\u52d5\u4f86\u6c7a\u5b9a\u4f7f\u7528\u4ec0\u9ebc\u6846\u67b6\\n\\n\u7576\u4e0d\u77e5\u9053\u8981\u9078\u4ec0\u9ebc\u6846\u67b6\u7684\u6642\u5019\u53ef\u4ee5\u5f9e\u4e00\u4e9b\u65b9\u5411\u4e0b\u624b\\n\\n* \u7a0b\u5f0f\u8a9e\u8a00\\n* \u4f7f\u7528\u4eba\u6578\u591a\u5be1,\u4f7f\u7528\u4eba\u6578\u6bd4\u8f03\u591a\u7684\u8a71\u4e5f\u6703\u6bd4\u8f03\u591a\u4eba\u9047\u5230\u76f8\u540c\u554f\u984c,\u9019\u6a23\u6709\u89e3\u7684\u6a5f\u7387\u4e5f\u6703\u6bd4\u8f03\u9ad8\\n\\n\u4e3b\u8981\u9700\u6c42:\\n\\n* i18n\\n\\n`/zh/index.html`\\n\\n\u986f\u793a\u4e2d\u6587\u7684\u9801\u9762\\n\\n`/en/index.html`\\n\\n\u986f\u793a\u82f1\u6587\u7684\u9801\u9762\\n\\n* \u4e0d\u540c\u9801\u9762\u5448\u73fe\u4e0d\u540c category \u7684\u6587\u7ae0\\n\\n\u50cf\u662f `/blog`\\n\\n\u6703\u986f\u793a\u51fa front matter \u7684 category \u662f blog \u7684\u6587\u7ae0\\n\\n* \u80fd\u5920\u7167 i18n \u986f\u793a\u5c0d\u61c9\u8a9e\u7cfb\u7684\u6587\u7ae0\\n\\n\u50cf\u662f `/zh/blog`\\n\\n\u986f\u793a\u51fa front matter \u7684 category \u662f blog \u800c\u4e14 locale \u662f zh \u7684\u6587\u7ae0\\n\\n* \u5404\u81ea category \u7684\u6587\u7ae0\u7167 tag \u5206\u985e\u986f\u793a\\n\\n\u50cf\u662f `/blog/life`\\n\\n\u6703\u986f\u793a\u51fa front matter \u7684 category \u662f blog \u7684\u6587\u7ae0\u800c\u4e14 tag \u662f life \u7684\u6587\u7ae0\\n\\n# i18n\\n\\n\u4e3b\u8981\u662f\u53c3\u8003\u9019\u7bc7\u6587\u7ae0 [https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/](https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/ \\"https://forestry.io/blog/creating-a-multilingual-blog-with-jekyll/\\")\\n\\n`index.html`\\n\\n    ---\\n        permalink: /\\n        i18n_prefix: index\\n        lang: en\\n    ---\\n\\n    {% t title %}\\n    // hello\\n\\n`zh/index.html`\\n\\n    ---\\n    permalink: /zh\\n    i18n_prefix: index\\n    lang: en\\n    ---\\n\\n    {% t title %}\\n    // \u4f60\u597d\\n\\n`_data/en.yml`\\n\\n    index:\\n    \\ttitle: hello\\n\\n`_data/zh.yml`\\n\\n    index:\\n    \\ttitle: \u4f60\u597d\\n\\n`_plugins/i18n_tag`\\n\\n    module Jekyll\\n      class I18nTag < Liquid::Tag\\n        def initialize(tag_name, text, tokens)\\n          super\\n          @text = text.strip\\n        end\\n\\n        def render(context)\\n          site = context.registers[:site]\\n          page = context.registers[:page]\\n          path = @text.split(\'.\')\\n          if site.data[page[\'locale\']][page[\'i18n_prefix\']]&.dig(*path)\\n            site.data[page[\'locale\']][page[\'i18n_prefix\']].dig(*path)\\n          else\\n            site.data[page[\'locale\']].dig(*path)\\n          end\\n        end\\n      end\\n    end\\n\\n    Liquid::Template.register_tag(\'t\', Jekyll::I18nTag)\\n\\n# Pagination\\n\\n\u4f7f\u7528\u9019\u500b\u5957\u4ef6 [https://github.com/sverrirs/jekyll-paginate-v2](https://github.com/sverrirs/jekyll-paginate-v2 \\"https://github.com/sverrirs/jekyll-paginate-v2\\")\\n\\n\u9019\u500b\u5957\u4ef6\u80fd\u5920\u4f9d\u7167 locale \u548c category \u548c tag \u4f86\u7522\u751f pagination\\n\\n`index.html`\\n\\n    ---\\n    layout: index\\n    permalink: /\\n    pagination:\\n        per_page: 5\\n        enabled: true\\n        locale: en\\n    ---\\n\\n`resource.html`\\n\\n    ---\\n    layout: resource\\n    permalink: /\\n    pagination:\\n        categories:\\n        - resource\\n        per_page: 5\\n        enabled: true\\n        locale: en\\n\\n    ---\\n\\n`resource-browse-by-tag-technical`\\n\\n    ---\\n    layout: resource-browse-by-tag-technical\\n    permalink: /\\n    pagination:\\n        categories:\\n        - resource\\n        tags:\\n        - technical\\n        per_page: 5\\n        enabled: true\\n        locale: en\\n    ---\\n\\n\u9019\u908a\u7528\u6bd4\u8f03\u667a\u969c\u7684\u65b9\u6cd5\u7522\u751f browse by tag \u7684\u7db2\u9801\\n\\n\u539f\u672c\u662f\u60f3\u8aaa\u7528 Jekyll \u7684 generator plugin \u5148\u628a\u67d0\u500b category \u7684\u6587\u7ae0 tag \u62ff\u51fa\u4f86\uff0c\u7136\u5f8c\u4f9d\u7167 tag \u7522\u751f page\\n\\n\u6211\u5927\u6982\u5beb\u4e86\u4e09\u5929\u653e\u68c4\u4e86\\n\\n\u9019\u500b\u65b9\u6cd5\u662f\u884c\u4e0d\u901a\u7684\u5982\u679c\u8981\u7528 jekyll-pagination-v2 \u7684\u8a71\\n\\n\u6211\u731c\u53ef\u80fd\u7528\u539f\u751f\u7684 pagination \u6709\u53ef\u80fd\u53ef\u4ee5\\n\\n\u4f46\u662f\u6c92\u6709\u60f3\u8981\u53bb\u5617\u8a66\u4e86\\n\\nJekyll \u6709\u500b\u721b\u7684\u9ede\u5c31\u662f\u4ed6\u7684 plugin \u90fd\u662f\u8981\u7528\u731c\u7684\u53bb\u5beb\\n\\n\u6211\u7684\u65b9\u6cd5\u662f\u53bb\u53c3\u8003\u73fe\u5728\u6709\u7684\u5404\u500b plugin\\n\\n\u7136\u5f8c\u958b [Jekyll::Page](https://www.rubydoc.info/github/jekyll/jekyll/Jekyll/Page) \u7684\u6587\u4ef6\u908a\u5beb\u908a\u731c\\n\\n# \u7d66\u4e0a\u7a3f\u4eba\u54e1\u4f7f\u7528\u7684\u7db2\u7ad9\\n\\n\u5f88\u63a8\u85a6\u9019\u500b\u7db2\u7ad9 [https://forestry.io/](https://forestry.io/ \\"https://forestry.io/\\")\\n\\n\u5176\u5be6 i18n \u7684\u4f5c\u6cd5\u5c31\u662f\u9019\u500b\u7db2\u7ad9\u7684\u6587\u7ae0\\n\\n# CSS \u5c0f\u6280\u5de7\u6216\u662f\\n\\n## image wrapper\\n\\n\u6211\u81ea\u5df1\u662f\u6bd4\u8f03\u559c\u6b61\u5728\u5916\u9762\u518d\u52a0\u4e00\u5c64 wrapper \u7136\u5f8c\u7528\u5916\u6846\u4f86\u63a7\u5236\u5bec\u5ea6\u548c\u9ad8\u5ea6\\n\\n\u5bec\u5ea6 300px \u7136\u5f8c\u9ad8\u5ea6\u4fdd\u6301\u6bd4\u4f8b\u653e\u5927\\n\\n### HTML\\n\\n    <div class=\\"logo\\">\\n    \\t<img src=\\"...\\">\\n    </div>\\n\\n### CSS\\n\\n    .logo{\\n    \\twidth: 300px;\\n    \\timg{\\n        \\twidth: 100%;\\n        }\\n    }\\n\\n## Aspect Ratio Boxes\\n\\n\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7\u6587\u7ae0 [https://css-tricks.com/aspect-ratio-boxes/](https://css-tricks.com/aspect-ratio-boxes/ \\"https://css-tricks.com/aspect-ratio-boxes/\\")\\n\\n\u6bd4\u5982\u8aaa\u60f3\u8981\u6bd4\u4f8b\u662f 4:3 (\u5bec vs \u9ad8)\\n\\n\u5bec\u5ea6\u4f54\u6eff 100% \u5782\u76f4\u81f3\u4e2d\u5c0d\u9f4a\u591a\u9918\u7684\u96b1\u85cf\u8d77\u4f86\\n\\n### HTML\\n\\n    <div class=\\"ratio-box\\">\\n    \\t<img src=\\"...\\">\\n    </div>\\n\\n### Original CSS\\n\\n    .ratio-box{\\n        overflow: hidden;\\n        position: relative;\\n        &::after {\\n          content: \\"\\";\\n          display: block;\\n          padding-top: 75%;\\n        }\\n        img {\\n          position: absolute;\\n          top: 50%;\\n          transform: translateY(-50%);\\n          width: 100%;\\n        }\\n    }\\n\\n### Inspired by one of my friend\'s CSS\\n\\n    .ratio-box{\\n        &::after {\\n          content: \\"\\";\\n          display: block;\\n          padding-top: 75%;\\n        }\\n        img {\\n          height: 100%;\\n          width: 100%;\\n          object-fit: cover;\\n        }\\n    }\\n\\n## Nested links\\n\\n[https://css-tricks.com/nested-links/](https://css-tricks.com/nested-links/ \\"https://css-tricks.com/nested-links/\\")\\n\\n### HTML\\n\\n    <a href=\\"...\\">\\n      <a href=\\"...\\">\\n    \\t...\\n      </a>\\n    </a>\\n\\n\u9019\u6a23\u5176\u5be6\u5c31\u6703\u6709\u975e\u9810\u671f\u7684\u73fe\u8c61\u767c\u751f\u61c9\u8a72\u907f\u514d\\n\\n## Stop box-sizing everything\\n\\n[https://aastudio.fr/box-sizing.html](https://aastudio.fr/box-sizing.html \\"https://aastudio.fr/box-sizing.html\\")\\n\\n\u4e00\u958b\u59cb\u5728\u5beb\u7684\u6642\u5019\u767c\u73fe\u6709 `box-sizing` \u9019\u6771\u897f\u597d\u65b9\u4fbf\u5594\\n\\n\u4f60\u8a2d\u5bec\u5ea6\u662f\u591a\u5c11\u5c31\u662f\u591a\u5c11\\n\\n\u5c31\u76f4\u63a5\u628a\u5168\u90e8\u6771\u897f\u90fd\u9019\u6a23\u5beb\u4e86\\n\\n### HTML\\n\\n      html { box-sizing: border-box; }\\n\\n\u5f8c\u4f86\u6703\u767c\u73fe\u6709\u4e9b\u6771\u897f\u6839\u672c\u4e0d\u9700\u8981\u6216\u662f\u80fd\u7528 padding + border \u7b97\u5c31\u53ef\u4ee5\u4e86\\n\\n\u5c31\u5168\u90e8\u6539\u56de\u4f86\u4e86\\n\\n## Mobile first\\n\\n\u4e00\u958b\u59cb\u5728\u523b\u7684\u6642\u5019\u5148\u523b desktop \u7248\u518d\u523b mobile \u7248\\n\\n\u4e8b\u5be6\u4e0a\u61c9\u8a72\u53cd\u904e\u4f86\\n\\n\u9019\u500b\u6211\u523b\u5230\u4e00\u534a\u7684\u6642\u5019\u767c\u89ba\u9019\u4ef6\u4e8b\u5f8c\u5c31\u6539\u904e\u4f86\u4e86\\n\\n## Don\'t affect positioning of other elements on border-width changes\\n\\n\u4f60\u53ef\u80fd\u6703\u60f3\u8981\u6709 hover \u7684\u6642\u5019\\n\\n\u5143\u7d20\u4e0b\u9762\u52a0\u4e00\u4e0b\u5e95\u7dda\\n\\n\u4f46\u662f\u4f60\u52a0\u4e86 border \u5143\u7d20\u7684\u5927\u5c0f\u5c31\u6539\u8b8a\u4e86\\n\\n\u5c31\u6703\u7522\u751f\u79fb\u4f4d\\n\\n1. \u4f7f\u7528 box-shadow\\n2. \u4f60\u53ef\u4ee5\u5148\u628a border \u52a0\u4e0a\u53bb\u4f46\u662f transparent \u7b49\u5230 hover \u7684\u6642\u5019\u518d\u6539\u8b8a\u984f\u8272\u986f\u793a\u51fa\u4f86\\n\\n# CSS Naming\\n\\n## [OOCSS(Object Oriented CSS)](https://www.keycdn.com/blog/oocss \\"OOCSS\\")\\n\\n### HTML\\n\\n    <button class=\\"btn btn-small btn-primary\\"></button>\\n\\n## [SMACSS](http://smacss.com/)\\n\\n### HTML\\n\\n    <ul class=\\"nav\\">\\n      <li class=\\"nav-item\\">\\n        <a class=\\"nav-link active\\" href=\\"#\\">Active</a>\\n      </li>\\n    </ul>\\n\\n## [BEM](http://getbem.com/naming/)\\n\\n> There are only two hard problems in Computer Science: cache invalidation and naming things \u2014 _Phil Karlton_\\n\\n### Block\\n\\n`block-name`\\n\\n#### HTML\\n\\n    <div class=\\"block\\">\\n          ...\\n          <span class=\\"block__elem\\"></span>\\n     </div>\\n\\n#### CSS\\n\\n    .block { color: #042; }\\n\\n### Element\\n\\n`block-name__element-name`\\n\\n#### HTML\\n\\n    <div class=\\"block\\">\\n    \\t  ...\\n    \\t  <span class=\\"block__elem\\"></span>\\n     </div>\\n\\n#### CSS\\n\\n##### Good\\n\\n    .block__elem { color: #042; }\\n\\n##### Bad\\n\\n    .block .block__elem { color: #042; }\\n        div.block__elem { color: #042; }\\n\\n### Modifier\\n\\n\u5176\u5be6 Modifier \u7684\u5beb\u6cd5\u6bd4\u8f03\u6709\u6b67\u7570\\n\\n\u6709\u5169\u7a2e\u5beb\u6cd5\\n\\n`block-name__element-name--modifier-name-modifier_value`\\n\\n`block-name__element-name_modifier-name_modifier_value`\\n\\n\u6211\u81ea\u5df1\u662f\u6bd4\u8f03\u559c\u6b61\u5f8c\u8005\\n\\n\u4ee5\u4e0b\u4f8b\u5b50\u90fd\u7528\u5f8c\u8005\u7684\u5beb\u6cd5\\n\\n#### HTML\\n\\n##### Good\\n\\n    <div class=\\"block block_mod\\">...</div>\\n        <div class=\\"block block_size-big\\n            block_shadow_yes\\">...</div>\\n\\n##### Bad\\n\\n    <div class=\\"block_mod\\">...</div>\\n\\n#### CSS\\n\\n##### Use modifier class name as selector:\\n\\n    .block_hidden { }\\n\\n##### To alter elements based on a block-level modifier:\\n\\n    .block_mod .block__elem { }\\n\\n##### Element modifier:\\n\\n    .block__elem_mod { }\\n\\n### Example\\n\\n#### HTML\\n\\n    <form class=\\"form form_theme_xmas form_simple\\">\\n      <input class=\\"form__input\\" type=\\"text\\" />\\n      <input\\n        class=\\"form__submit form__submit_disabled\\"\\n        type=\\"submit\\" />\\n    </form>\\n\\n#### CSS\\n\\n    .form { }\\n    .form_theme_xmas { }\\n    .form_simple { }\\n    .form__input { }\\n    .form__submit { }\\n    .form__submit_disabled { }\\n\\n### Youtube\\n\\n\u8a73\u7d30\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7\u6587\u7ae0 [https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252](https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252 \\"https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252\\")\\n#### HTML\\n\\n    <header class=\\"youtube-header\\">\\n      <img class=\\"youtube-header__logo\\"/>\\n      <div class=\\"youtube-header__search\\"></div>\\n      <ul class=\\"youtube-header__list\\">\\n        <li class=\\"youtube-header__item></li>\\n        <li class=\\"youtube-header__item></li>\\n     </ul>\\n    </header>\\n\\n#### SASS\\n\\n    .youtube-header {\\n      // rules\\n      &__logo {\\n        // rules\\n      }\\n      &__search {\\n        // rules\\n      }\\n      &__list {\\n        // rules\\n      }\\n      &__item {\\n        // rules\\n      }\\n    }\\n\\n### \u624b\u597d\u7662\u597d\u60f3\u5beb nested element\\n\\n\u53ef\u4ee5\u5148\u770b\u5b8c\u9019\u7bc7 [https://en.bem.info/methodology/quick-start/#nesting-1](https://en.bem.info/methodology/quick-start/#nesting-1 \\"https://en.bem.info/methodology/quick-start/#nesting-1\\")\\n\\n\u8981\u9075\u5b88\u4e09\u9ede:\\n\\n* Elements can be nested inside each other.\\n* You can have any number of nesting levels.\\n* An element is always part of a block, not another element. This means that element names can\'t define a hierarchy such as `block__elem1__elem2`.\\n\\n#### Example\\n\\n\u53ef\u80fd\u6703\u9047\u5230\u4e00\u7a2e\u60c5\u6cc1\u6709 block \u548c elem1 \u548c elem2\\n\\nelem1 \u548c elem2 \u76f8\u5c0d\u65bc block\\n\\n\u90a3\u5c31\u53ef\u4ee5\u5beb\u6210 `block__elem1` \u548c `block__elem2`\\n\\n\u4f46\u662f elem2 \u662f\u76f8\u5c0d\u65bc elem1 \u7684\\n\\n\u53ef\u4ee5\u5ffd\u8996 elem2 \u5c0d\u65bc elem1 \u7684\u95dc\u4fc2\\n\\n\u7562\u7adf\u4ed6\u5011\u90fd\u662f\u76f8\u5c0d\u65bc block\\n\\n\u8981\u662f\u4f60\u5c07 elem2 nested \u5728 elem1 \u88e1\\n\\n\u90a3\u4f60\u5c31\u7121\u6cd5\u8b93 elem2 \u5728\u6c92\u6709 elem1 \u7684\u60c5\u6cc1\u4e0b\u7368\u7acb\u5b58\u5728\\n\\n    <form class=\\"search-form\\">\\n        <div class=\\"search-form__content\\">\\n            <input class=\\"search-form__input\\">\\n\\n            <button class=\\"search-form__button\\">Search</button>\\n        </div>\\n    </form>\\n\\n\u6216\u662f\u5c07 elem1 \u52a0\u4e0a elem2 \u7576\u6210\u7d44\u5408\u5b57\u7576\u6210\u4e00\u500b\u65b0\u7684 element `elem1-elem2`\\n\\n`block__elem1-elem2`\\n\\n    <form class=\\"search-form\\">\\n        <div class=\\"search-form__content\\">\\n            <input class=\\"search-form__content-input\\">\\n\\n            <button class=\\"search-form__content-button\\">Search</button>\\n        </div>\\n    </form>\\n\\n### Block in Block\\n\\n[https://gist.github.com/Integralist/4960210](https://gist.github.com/Integralist/4960210 \\"https://gist.github.com/Integralist/4960210\\")\\n\\n#### HTML\\n\\n    <div class=\\"blocka\\">\\n    \\t<div class=\\"blocka__blockb\\">\\n        \\t<div class=\\"blocka__blockb__elementb>\\n            </div>\\n        </div>\\n    </div>\\n\\n#### Alternative HTML(1)\\n\\n    <div class=\\"blocka\\">\\n    \\t<div class=\\"blocka__elementa blockb\\">\\n        \\t<div class=\\"blockb__elementb>\\n            </div>\\n        </div>\\n    </div>\\n\\n\u4ee5 blocka__elementa \u4f86\u4ee3\u8868\u548c blocka \u7684\u95dc\u4fc2\\n\\n#### Alternative HTML(2)\\n\\n    <div class=\\"blocka\\">\\n    \\t<div class=\\"blockb\\">\\n        \\t<div class=\\"blockb__elementb>\\n            </div>\\n        </div>\\n    </div>\\n\\n\u5982\u679c blocka \u548c blockb \u6c92\u6709\u76f8\u5c0d\u95dc\u4fc2\u7684\u8a71\u53ef\u4ee5\u7701\u7565 blocka-elementa\\n\\n### Block container\\n\\n#### HTML\\n\\n    <div class=\\"product-container>\\n        <div class=\\"product>\\n            <div class=\\"product__content\\">\\n            </div>\\n        </div>\\n    </div>\\n\\n#### Alternative HTML(1)\\n\\n    <div class=\\"product>\\n        <div class=\\"product__inner>\\n            <div class=\\"product__content\\">\\n            </div>\\n        </div>\\n    </div>\\n\\n\u5c07 product \u5f80\u4e0a\u62c9\u4e00\u5c64\u539f\u672c\u7684\u7528 product__inner \u53d6\u4ee3\\n\\n#### Alternative HTML(2)\\n\\n    <div class=\\"product-container>\\n        <div class=\\"product>\\n            <div class=\\"product__content\\">\\n            </div>\\n        </div>\\n    </div>\\n\\n\u4e0d\u4e88\u7406\u6703 product-container \u548c product \u7684\u95dc\u4fc2\\n\\n\u6211\u81ea\u5df1\u662f\u6bd4\u8f03\u559c\u6b61\u9019\u500b\u5beb\u6cd5\\n\\n\u4e3b\u8981\u7684\u5206\u754c\u9ede\u662f\u5728\u65bc product \u662f\u5426\u80fd\u7368\u7acb\u5b58\u5728 product-container \u5916\\n\\n### Don\'t use nested selectors\\n\\n\u53ea\u6709\u4f60\u8981\u6539\u8b8a element \u7684 style based on block \u7684 modifier \u7684\u6642\u5019\\n\\n    .button_hovered .button__text\\n    {\\n      text-decoration: underline;\\n    }\\n    .button_theme_islands .button__text\\n    {\\n      line-height: 1.5;\\n    }\\n\\n\u6216\u662f\u4f60\u53ef\u4ee5\u628a\u539f\u672c\u7684 SCSS \u7528 `@at-root` \u6539\u5beb\\n\\n\u65e2\u53ef\u4ee5\u7528\u5de2\u72c0\u7d50\u69cb\u5305\u8d77\u4f86\u4f46\u662f\u8f38\u51fa\u537b\u4e0d\u662f nested\\n\\n#### bad SCSS\\n\\n    .block{\\n    \\t.block__element{\\n        \\t...\\n        }\\n    }\\n\\n#### Good SCSS\\n\\n    .block{\\n    \\t@at-root #{&}__element{\\n        \\t...\\n        }\\n    }\\n\\n#### Good CSS Output\\n\\n    .block{\\n    \\t...\\n    }\\n    .block__element{\\n        ...\\n    }\\n\\n### Don\'t use combined selectors\\n\\n#### HTML\\n\\n    <button class=\\"button button_theme_islands button_active\\">...</button>\\n\\n#### Bad CSS\\n\\n    .button.button_theme_islands {}\\n    .button.button_active {}\\n\\n\u4f60\u5fc5\u9808\u5c07\u5169\u500b modifier \u62c9\u5230\u540c\u6a23 .button \u7684 level \u624d\u80fd\u6709\u76f8\u540c\u7684 CSS \u6b0a\u91cd\\n\\n#### Bad SCSS\\n\\n    .button {\\n    \\t.button_active{\\n        \\t...\\n        }\\n        .button_theme_islands{\\n        \\t...\\n        }\\n    }\\n\\n#### Specific page HTML\\n\\n    <div class=\\"index-page-button button button_active\\">\\n    </div>\\n\\n#### Specific page CSS\\n\\n    .index-page-button{\\n    \\t...\\n    }\\n\\n\u5171\u7528 button \u7684 style \u5c07\u7279\u5b9a\u9801\u9762\u7684 style \u5beb\u5728 index-page-button \u88e1\\n\\n\u4f46\u662f\u4f60\u6703\u767c\u89ba\u84cb\u4e0d\u904e\u53bb button \u7684 modifier \u56e0\u70ba button_active \u548c button_theme_islands \u7684 Specificity\\n\\n\u90fd\u6bd4 index-page-button \u9ad8\\n\\n#### Good CSS\\n\\n    .button_theme_islands {}\\n    .button_active {}\\n    .button {}\\n\\n\u53ef\u4ee5\u9019\u6a23\u5beb\u5229\u7528 css import \u7684 order \u4f86\u6c7a\u5b9a\u8907\u5beb\u7684\u512a\u5148\u7a0b\u5ea6\\n\\n    // component (button)\\n    @import \\"component\\";\\n\\n    // Specific page(index)\\n    @import \\"index\\";\\n\\n#### Exception\\n\\n\u6bd4\u5982\u4f60\u6709\u53ef\u80fd\u9700\u8981\u7528 markdown \u751f\u6210 html tag\\n\\n\u5728 .content class \u7684 block \u5957\u7528\u4f60\u81ea\u5df1\u5beb\u7684 style\\n\\n    <div class=\\"content\\">\\n      ... \x3c!-- the user\u2019s text --\x3e\\n    </div>\\n    CSS rules:\\n    .content a {\\n      ...\\n    }\\n    .content p {\\n      font-family: Arial, sans-serif;\\n      text-align: center;\\n    }\\n\\n### Don\'t use tag selector\\n\\n#### HTML\\n\\n    <header>\\n      <a href=\\"/\\">\\n        <img src=\\"img.logo.png\\" alt=\\"Logo\\">\\n      </a>\\n    </header>\\n\\n#### SCSS\\n\\n    header{\\n    \\ta{\\n        \\t...\\n        }\\n    }\\n\\n\u50cf\u9019\u6a23\u7684\u547d\u540d\u65b9\u5f0f\u5f88\u96e3\u8b93\u4eba\u53bb\u806f\u60f3 header \u548c a \u4e4b\u9593\u7684\u95dc\u4fc2\\n\\nHTML \u96d6\u7136\u6709 [semantic elements](https://www.w3schools.com/html/html5_semantic_elements.asp) \u4f46\u662f\u73fe\u5728\u80fd\u8868\u793a\u7684\u8a9e\u610f\u9084\u662f\u6bd4\u8f03\u6709\u9650\\n\\n\u7528 class name \u53bb\u8868\u793a\u6bd4\u8f03\u6e05\u695a\\n\\n# \u5c0d\u65bc\u7c21\u55ae\u548c\u8907\u96dc\u7684\u5143\u7d20\u7684\u7b56\u7565\\n\\n\u7c21\u55ae\u7684\u5143\u7d20\u53ef\u4ee5\u60f3\u8fa6\u6cd5\u7528 utilities class \u4f86\u9054\u6210\\n\\n## HTML\\n\\n    <div class=\\"once-block font-bold text-align-center\\">\\n    </div>\\n\\n\u8907\u96dc\u7684\u5143\u7d20\u5176\u5be6\u5c31\u6bd4\u8f03\u9069\u5408\u81ea\u5df1\u5beb\u6210\u4e00\u500b class \u4e26\u64b0\u5beb style\uff0c\u4e0d\u7136\u4f60\u7684 html \u88e1\u7684 class \u53ef\u80fd\u5c31\u6703\u592a\u591a\uff0c\u5f88\u8907\u96dc\u4e0d\u597d\u7dad\u8b77\\n\\n## HTML\\n\\n    <div class=\\"muzukashii-block\\">\\n    </div>\\n\\n# Nested nested block and element\\n\\n## Bad HTML\\n\\n    <header class=\\"navber\\">\\n        <div class=\\"navbar-menu\\">\\n            <div class=\\"navbar-menu-item>\\n            \\t<div class=\\"navbar-menu-item-submenu\\">\\n                \\t<div class=\\"navbar-menu-item-submenu-item>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </header>\\n\\n## Good HTML\\n\\n    <header class=\\"navber\\">\\n        <div class=\\"navbar-menu\\">\\n            <div class=\\"navbar-item>\\n            \\t<div class=\\"navbar-submenu\\">\\n                \\t<div class=\\"navbar-submenu-item>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </header>\\n\\n\u9019\u500b\u6211\u81ea\u5df1\u662f\u89ba\u5f97\u6bd4\u8f03\u4e3b\u89c0\u7684\u60f3\u6cd5\u4e0d\u4e00\u5b9a\u7b26\u5408 convension\\n\\n\u5beb class \u7684\u95dc\u9375\u5c31\u662f\u4e0d\u8981\u649e\u540d\\n\\n\u4e3b\u8981\u7684\u6982\u5ff5\u662f namespace \u5c07\u9019\u6574\u500b navbar component \u95dc\u5728 navbar \u9019\u500b namespace \u4e0b\\n\\n\u5728\u9069\u7576\u7684\u5c64\u6578\u5207\u6210\u53e6\u4e00\u500b\u65b0\u7684 block\\n\\n\u53ea\u8981\u6bcf\u500b\u5143\u7d20\u90fd\u95dc\u5728 navbar namespace \u5e95\u4e0b\u5c31\u4e0d\u6703\u548c\u5176\u4ed6\u5143\u4ef6\u649e\u540d\\n\\n# CSS \u611f\u60f3\\n\\n\u76e1\u91cf\u8b93\u5143\u7d20\u90fd\u5728\u540c\u4e00\u5c64\\n\\n\u8b93 CSS \u7684 import order \u4f86\u8986\u84cb\u76f8\u540c\u7684\u5c6c\u6027\\n\\n\u5f8c\u4f86\u60f3\u4e86\u4e00\u4e0b\u5176\u5be6 BEM \u53ef\u80fd\u6c92\u6709\u6bd4\u8f03\u597d\\n\\n\u53c8\u518d\u53bb\u770b\u4e86\u4e00\u6b21 youtube \u7684\u7db2\u7ad9\\n\\n\u4ed6\u5011\u6539\u56de\u7528 - \u5206\u9694\u4e86\\n\\n\u7576\u7136\u5982\u679c\u80fd\u7528 [CSS Module](https://css-tricks.com/css-modules-part-1-need/) \u662f\u6700\u597d\u7684\u62c9\\n\\n\u9019\u6a23 class \u540d\u5b57\u90fd\u4e0d\u6703\u649e\\n\\n# \u4e00\u4e9b\u4e0b\u6b21\u53ef\u4ee5\u6539\u9032\u7684\u9ede\\n\\n* \u53ef\u80fd\u9700\u8981\u8ddf\u8a2d\u8a08\u5e2b\u5354\u8abf\u8a2d\u8a08\u7a3f\u7684 breakpoint\uff0c\u6703\u662f\u5e0c\u671b\u53ef\u4ee5\u5957\u6846\u67b6\u7684 convension \u53ef\u4ee5\u5584\u7528 utilities class \u7528 class \u5c31\u7d44\u51fa\u7c21\u55ae\u7684 style\\n  * xs\\n  * sm(min-width: 576px)\\n  * md(min-width: 768px)\\n  * lg(min-width: 992px)\\n  * xl(min-width: 1200px)\\n* \u4e00\u958b\u59cb\u5c31\u5c07\u6240\u6709\u9801\u9762\u770b\u5b8c\u518d\u958b\u59cb\u5beb\uff0c\u5148\u5c07\u53ef\u4ee5\u5171\u7528\u7684 style \u523b\u51fa\u4f86\uff0c\u518d\u4f9d\u7167\u5404\u500b\u9801\u9762\u4e0d\u540c\u7684\u8981\u6c42\u7a0d\u4f5c\u8abf\u6574\uff0c\u6211\u4e00\u958b\u59cb\u5beb\u662f\u4e00\u500b\u9801\u9762\u4e00\u500b\u9801\u9762\u523b\uff0c\u6bcf\u6b21\u523b\u5b8c\u4e00\u500b\u9801\u9762\u624d\u767c\u89ba\u5230\u5176\u4ed6\u9801\u9762\u53ef\u4ee5\u5171\u7528\u9019\u500b style\uff0c\u4f46\u662f\u70ba\u4e86\u5171\u7528 style \u53c8\u5fc5\u9808\u7a0d\u505a\u8abf\u6574\\n* \u4f7f\u7528 rem \u548c em \u53d6\u4ee3 px\uff0c\u9019\u500b\u6709\u6e9d\u901a\u904e\u53ea\u662f\u5728\u8a2d\u8a08\u7684\u6642\u5019\u5c31\u7528\u4e86 px \u4e86\uff0c\u4f86\u4e0d\u53ca\\n\\n# References\\n\\n* [https://cythilya.github.io/2018/06/05/css-methodologies/](https://cythilya.github.io/2018/06/05/css-methodologies/ \\"https://cythilya.github.io/2018/06/05/css-methodologies/\\")\\n* [https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252](https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252 \\"https://codeburst.io/understanding-css-bem-naming-convention-a8cca116d252\\")\\n* [https://css-tricks.com/lets-define-exactly-atomic-css/](https://css-tricks.com/lets-define-exactly-atomic-css/ \\"https://css-tricks.com/lets-define-exactly-atomic-css/\\")\\n* [https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements](https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements \\"https://en.bem.info/methodology/quick-start/#guidelines-for-using-elements\\")\\n* [https://www.smashingmagazine.com/2018/06/bem-for-beginners/](https://www.smashingmagazine.com/2018/06/bem-for-beginners/ \\"https://www.smashingmagazine.com/2018/06/bem-for-beginners/\\")\\n* [https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506](https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506 \\"https://medium.com/@yanglin_68397/%E5%A5%BD%E7%94%A8%E7%9A%84-bootstrap-4-utilities-class-79484fa4c506\\")\\n* [https://zellwk.com/blog/css-architecture-1/](https://zellwk.com/blog/css-architecture-1/ \\"https://zellwk.com/blog/css-architecture-1/\\")\\n* [https://gist.github.com/Integralist/4960210](https://gist.github.com/Integralist/4960210 \\"https://gist.github.com/Integralist/4960210\\")\\n* [https://css-tricks.com/css-modules-part-1-need/](https://css-tricks.com/css-modules-part-1-need/ \\"https://css-tricks.com/css-modules-part-1-need/\\")"},{"id":"welcome","metadata":{"permalink":"/archives/welcome","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/2019-05-30-welcome.md","source":"@site/archives/2019-05-30-welcome.md","title":"Welcome","description":"Blog features are powered by the blog plugin. Simply add files to the blog directory. It supports tags as well!","date":"2019-05-30T00:00:00.000Z","formattedDate":"May 30, 2019","tags":[{"label":"facebook","permalink":"/archives/tags/facebook"},{"label":"hello","permalink":"/archives/tags/hello"},{"label":"docusaurus","permalink":"/archives/tags/docusaurus"}],"readingTime":0.175,"hasTruncateMarker":false,"authors":[{"name":"Yangshun Tay","title":"Front End Engineer @ Facebook","url":"https://github.com/yangshun","imageURL":"https://avatars0.githubusercontent.com/u/1315101?s=400&v=4"}],"frontMatter":{"slug":"welcome","title":"Welcome","author":"Yangshun Tay","author_title":"Front End Engineer @ Facebook","author_url":"https://github.com/yangshun","author_image_url":"https://avatars0.githubusercontent.com/u/1315101?s=400&v=4","tags":["facebook","hello","docusaurus"]},"prevItem":{"title":"Official website review","permalink":"/archives/official-website-review"},"nextItem":{"title":"Review of bamboofox platform","permalink":"/archives/review-of-bamboofox-platform"}},"content":"Blog features are powered by the blog plugin. Simply add files to the `blog` directory. It supports tags as well!\\n\\nDelete the whole directory if you don\'t want the blog features. As simple as that!"},{"id":"/review-of-bamboofox-platform","metadata":{"permalink":"/archives/review-of-bamboofox-platform","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/review-of-bamboofox-platform.md","source":"@site/archives/review-of-bamboofox-platform.md","title":"Review of bamboofox platform","description":"\u8a18\u9304\u4e00\u4e0b\u5beb bamboofox \u5e73\u53f0\u7684\u5fc3\u5f97","date":"2017-08-28T09:19:00.000Z","formattedDate":"August 28, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"}],"readingTime":1.54,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Review of bamboofox platform","categories":["computer science"],"tags":["ruby on rails"],"date":"2017-08-28T09:19:00.000Z"},"prevItem":{"title":"Welcome","permalink":"/archives/welcome"},"nextItem":{"title":"Rails on Ubuntu","permalink":"/archives/Rails-on-Ubuntu"}},"content":"\u8a18\u9304\u4e00\u4e0b\u5beb bamboofox \u5e73\u53f0\u7684\u5fc3\u5f97\\n\\n\u5176\u5be6\u7576\u521d\u9019\u500b\u5e73\u53f0\u662f\u70ba\u4e86 migrate \u4ee5\u524d\u7684\u8ab2\u7a0b\u6240\u5efa\u7f6e\u7684\\n\\n\u7576\u521d\u7684\u8ab2\u7a0b\u5e73\u53f0\u53ea\u80fd\u5bb9\u7d0d\u4e00\u500b\u8ab2\u7a0b\\n\\n\u6240\u4ee5\u4e3b\u8981\u7684\u8a2d\u8a08\u662f\u8981\u80fd\u5bb9\u7d0d\u591a\u500b\u8ab2\u7a0b\u70ba\u4e3b\\n\\n\u70ba\u4e86\u8a3b\u518a\u65b9\u4fbf\u5c31\u5beb\u4e86 OAuth \u767b\u5165\\n\\n\u5927\u90e8\u5206\u7684\u6642\u9593\u90fd\u662f\u5728 survey OAuth \u662f\u500b\u600e\u9ebc\u6a23\u7684\u6771\u897f\\n\\n\u9084\u6709\u7db2\u7ad9\u8981\u600e\u9ebc\u67b6\u8d77\u4f86\u4e4b\u985e\u7684\\n\\n\u6bd4\u8f03\u9ebb\u7169\u7684\u9ede\u662f\u60f3\u8981\u4e00\u500b\u5e33\u865f\u80fd\u5920 link \u591a\u500b OAuth provider\\n\\n\u50cf\u662f\u539f\u672c\u7528 facebook \u8a3b\u518a\u767b\u5165\u5f8c\\n\\n\u53c8\u60f3\u8981 link \u5225\u7684 social media (ex: github, google)\\n\\n\u4e3b\u8981\u662f\u53c3\u8003\u9019\u7bc7\u6587\u7ae0 https://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/\\n\\n\u628a\u548c OAuth \u6709\u95dc\u7684\u6b04\u4f4d\u79fb\u51fa `User` table \u5efa\u7acb\u4e00\u500b\u65b0\u7684 table `Identity`\\n\\n\u6bcf\u500b `user` has_many `identities`\\n\\n\u4e3b\u8981\u7684\u908f\u8f2f\u662f\u4f7f\u7528\u8005\u767b\u5165\u53ef\u4ee5 link \u5176\u4ed6 OAuth\\n\\n\u5982\u679c\u767b\u5165 OAuth \u6210\u529f\u5c31\u65b0\u589e identity \u7d66\u90a3\u500b user\\n\\n\u4e0b\u6b21\u767b\u5165\u7684\u6642\u5019\u5c31\u6703\u9760 identity \u4f86\u627e\u5230\u540c\u4e00\u500b user \u4e86\\n\\n\u4e3b\u8981\u67b6\u8a2d\u5e73\u53f0\u7684\u642d\u914d\u662f nginx + passenger + rvm\\n\\nmigrate \u7684\u65b9\u5f0f\u6211\u662f\u76f4\u63a5\u5148\u67b6\u4e00\u500b phpmyadmin \u8d77\u4f86\\n\\n\u5148\u65b0\u589e\u65b0\u7db2\u7ad9\u7684 schema\\n\\n\u7136\u5f8c\u6162\u6162\u628a\u820a\u7db2\u7ad9\u7684\u8cc7\u6599\u6539\u6210\u65b0\u7db2\u7ad9\u7684\u5f62\u5f0f\\n\\n\u6700\u5f8c\u518d\u76f4\u63a5 import \u5230\u65b0\u7db2\u7ad9\u7684\u8cc7\u6599\u5eab"},{"id":"/Rails-on-Ubuntu","metadata":{"permalink":"/archives/Rails-on-Ubuntu","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Rails-on-Ubuntu.md","source":"@site/archives/Rails-on-Ubuntu.md","title":"Rails on Ubuntu","description":"\u7c21\u55ae\u8a18\u9304\u4e00\u4e0b Ruby on Rails server setup","date":"2017-06-22T12:39:00.000Z","formattedDate":"June 22, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"}],"readingTime":3.72,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Rails on Ubuntu","author":"bananaapple","tags":["ruby on rails"],"categories":["computer science"],"date":"2017-06-22T12:39:00.000Z"},"prevItem":{"title":"Review of bamboofox platform","permalink":"/archives/review-of-bamboofox-platform"},"nextItem":{"title":"Rails best practices","permalink":"/archives/Rails-Best-practice"}},"content":"\u7c21\u55ae\u8a18\u9304\u4e00\u4e0b Ruby on Rails server setup\\n\u9019\u88e1\u7528\u7684\u662f\u6700\u65b0\u7248\u7684 Ubuntu 17.04 server \u7248\\n\u9019\u7bc7\u6703\u6559\u4f60\u8a2d\u5b9a\\n\\n* nginx\\n* passenger\\n* Let\'s Encrypt(https)\\n* postfix(mail server)\\n\\n\u56e0\u70ba\u8981\u8a2d\u5b9a Let\'s Encrypt \u548c postfix\uff0c\u6240\u4ee5\u8981\u6709\u4e00\u500b DNS \u7684 A Record \u6307\u5411\u4f60\u7684 ip \u4f4d\u7f6e\\n\\n## Passenger\\n\\n\u9019\u88e1\u4e3b\u8981\u6709\u4e09\u7a2e\u65b9\u6cd5\u53ef\u4ee5\u9078\\n\\n\u8a73\u7d30\u5167\u5bb9\u53ef\u4ee5\u53c3\u8003[\u9019\u7bc7](https://www.phusionpassenger.com/library/indepth/integration_modes.html)\\n\\n1. Standalone mode\\n\\n\u53ea\u6709 passenger\\n\\n1. Nginx integration mode\\n\\npassenger \u548c nginx \u6574\u5408\\n\\n1. Apache integration mode\\n\\npassenger \u548c apache \u6574\u5408\\n\\n\u9019\u88e1\u9078\u7528\u7684\u662f\u7b2c\u4e8c\u7a2e\u65b9\u6cd5\\n\\n\u56e0\u70ba nginx \u7684\u6548\u80fd\u6bd4 apache \u597d\\n\\n\u63a5\u8457\u5c31\u958b\u59cb\u5b89\u88dd nginx + passenger\uff0c\u5927\u90e8\u5206\u7684\u6b65\u9a5f\u90fd\u8ddf[\u9019\u7bc7](https://www.phusionpassenger.com/library/install/nginx/install/oss/xenial/)\u4e00\u6a23\\n\\n\u7a0d\u5fae\u8981\u6ce8\u610f\u4e00\u4e0b ubuntu \u7684 code name\uff0c\u50cf\u662f 17.04 \u7684 code name \u662f Zesty\\n\u5728\u52a0 apt \u7684 repo \u7684\u6642\u5019\u8981\u7a0d\u5fae\u6539\u4e00\u4e0b code name\\n\\n### Install passenger packages\\n\\n`deb https://oss-binaries.phusionpassenger.com/apt/passenger xenial main` =>\\n`deb https://oss-binaries.phusionpassenger.com/apt/passenger zesty main`\\n\\n    sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 561F9B9CAC40B2F7\\n    sudo apt-get install -y apt-transport-https ca-certificates\\n    \\n    # Add our APT repository\\n    sudo sh -c \'echo deb https://oss-binaries.phusionpassenger.com/apt/passenger zesty main > /etc/apt/sources.list.d/passenger.list\'\\n    sudo apt-get update\\n    \\n    # Install Passenger + Nginx\\n    sudo apt-get install -y nginx-extras passenger\\n\\n### Enable the passenger nginx module and restart nginx\\n\\n\u4fee\u6539 `/etc/nginx/nginx.conf` \u6a94\u6848 \u5c07 `# include /etc/nginx/passenger.conf` \u53d6\u6d88\u8a3b\u89e3\\n\\n\u91cd\u555f nginx\\n\\n    sudo service nginx restart\\n\\n### Notice\\n\\n\u53e6\u5916\u7db2\u8def\u4e0a\u9084\u6709\u53e6\u4e00\u7a2e\u88dd passenger \u548c nginx \u7684\u65b9\u6cd5\\n\\n\u662f\u81ea\u884c\u4e0b\u8f09\u4e0b\u4f86\u7de8\u8b6f\uff0c\u6240\u6709\u7684\u5957\u4ef6\u6700\u5f8c\u6703\u653e\u5728 /opt \u8cc7\u6599\u593e\u5e95\u4e0b\\n\\n\u6211\u81ea\u5df1\u662f\u4e0d\u63a8\u85a6\u9019\u7a2e\u65b9\u6cd5\uff0c\u56e0\u70ba\u9084\u8981\u81ea\u5df1\u53bb\u8a2d\u5b9a service script\\n\\n## Let\'s Encrypt\\n\\n\u8a73\u7d30\u53ef\u4ee5\u53c3\u8003[\u9019\u7bc7](https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04)\\n\\n## Postfix\\n\\n\u8a2d\u5b9a\u597d Let\'s Encrypt \u5f8c\u5c31\u6703\u6709 ssh key \u4e86\\n\\n### Install postfix package\\n\\n    sudo apt install -y postfix\\n\\n### Configure postfix\\n\\n\u4fee\u6539 `/etc/postfix/main.cf`\\n\\n\u539f\u672c\u61c9\u8a72\u662f\\n\\n    # TLS parameters\\n    smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem\\n    smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key\\n\\n\u4fee\u6539\u6210\\n\\n    # TLS parameters\\n    smtpd_tls_cert_file=/etc/letsencrypt/live/bamboofox.nctucs.net/fullchain.pem\\n    smtpd_tls_key_file=/etc/letsencrypt/live/bamboofox.nctucs.net/privkey.pem\\n    smtp_tls_security_level=may\\n    smtpd_tls_security_level=may\\n\\n\u6211\u7684 domain name \u662f `bamboofox.nctucs.net`\uff0c\u9019\u88e1\u8981\u4fee\u6539\u6210\u81ea\u5df1\u7684 domain name\\n\\n`smtp_tls_security_level=may` \u548c `smtpd_tls_security_level=may` \u662f\u8b93 email \u5bc4\u4fe1\u548c\u6536\u4fe1\u52a0\u5bc6\\n\\n\u5c07\u81ea\u5df1\u7684 ip \u4e5f\u52a0\u9032 relay \u7684 list\\n\\n\u4fee\u6539 `/etc/postfix/main.cf`\\n\\n    mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128\\n\\n\u4fee\u6539\u6210\\n\\n    mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 140.113.209.18 \\n\\n\u9019\u908a\u5f88\u91cd\u8981\u56e0\u70ba\u4e4b\u5f8c\u7528 `devise` \u5bc4\u4fe1\u7684\u6642\u5019\u6703\u6709 `certification` \u7684\u554f\u984c\\n\\n### Restart postfix\\n\\n    sudo service postfix restart\\n\\n## Deploy ruby on rails project\\n\\n\u53c3\u8003[\u9019\u7bc7](https://gorails.com/deploy/ubuntu/16.04)\\n\\n\u76f4\u63a5\u5f9e\u5275 `deploy` \u5e33\u865f\u958b\u59cb\u505a\\n\\n### Create deploy user\\n\\n    sudo adduser deploy\\n    sudo adduser deploy sudo\\n    su deploy\\n\\n### Install rvm\\n\\n    gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\\n    \\\\curl -sSL https://get.rvm.io | bash -s stable\\n    echo \\"source ~/.rvm/scripts/rvm\\" >> .bashrc\\n    source ~/.rvm/scripts/rvm\\n    rvm install 2.4.0\\n    rvm use 2.4.0 --default\\n\\n### Install basic gems\\n\\n    gem install bundler\\n    gem install rails\\n\\n### Show passenger config\\n\\n\u57f7\u884c\u6307\u4ee4\\n\\n    passenger-config about ruby-command\\n\\n\u6703\u5f97\u5230\\n\\n    passenger-config was invoked through the following Ruby interpreter:\\n      Command: /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby\\n      Version: ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\\n      To use in Apache: PassengerRuby /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby\\n      To use in Nginx : passenger_ruby /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby\\n      To use with Standalone: /home/deploy/.rvm/gems/ruby-2.4.0/wrappers/ruby /usr/bin/passenger start\\n\\n\u9019\u8981\u7528\u5728\u7b49\u4e0b\u7684 nginx config\\n\\n### Install nvm\\n\\n    curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash\\n    export NVM_DIR=\\"$HOME/.nvm\\"\\n    [ -s \\"$NVM_DIR/nvm.sh\\" ] && . \\"$NVM_DIR/nvm.sh\\" # This loads nvm\\n    nvm install stable\\n\\n### Install yarn\\n\\n    curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\\n    echo \\"deb https://dl.yarnpkg.com/debian/ stable main\\" | sudo tee /etc/apt/sources.list.d/yarn.list\\n    sudo apt-get update && sudo apt-get install yarn\\n\\n### Create basic app\\n\\n    rails new myapp --webpack=react\\n\\n### Deploy on nginx\\n\\n\u4fee\u6539 myapp \u88e1\u7684 `config/secrets.yml`\\n\\n\u9019\u88e1 secret \u53ef\u4ee5\u4f7f\u7528 `rake secret` \u7522\u751f\\n\\n    production:\\n      secret_key_base: d7913c3e87fadd4312ee1c5c1b13320caeecc72548f20b9122e2a1bf9ccdf0e9ecb86675168e578b5b3e960a81daa967c0081f69b082eb0c0e5df4b5810d71a9\\n\\n\u4fee\u6539 `/etc/nginx/sites-available/default`\\n\\n    server {\\n    \\n            # SSL configuration\\n            #\\n            listen 443 ssl http2 default_server;\\n            listen [::]:443 ssl http2 default_server;\\n            include snippets/ssl-bamboofox.nctucs.net.conf;\\n            include snippets/ssl-params.conf;\\n    \\t\\t\\n            # Add these three lines\\n            \\n            passenger_enabled on;\\n            server_name bamboofox.nctucs.net;\\n            root /home/deploy/myapp/public;\\n    }\\n\\n\u91cd\u555f nginx\\n\\n    sudo service nginx restart"},{"id":"/Rails-Best-practice","metadata":{"permalink":"/archives/Rails-Best-practice","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Rails-Best-practice.md","source":"@site/archives/Rails-Best-practice.md","title":"Rails best practices","description":"Rails best practices \u662f\u4e00\u500b\u53ef\u4ee5\u5e6b\u4f60\u6aa2\u67e5 Rails \u5c08\u6848\u67b6\u69cb\u7684 gem","date":"2017-04-21T16:38:00.000Z","formattedDate":"April 21, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"}],"readingTime":1.33,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Rails best practices","author":"bananaapple","tags":["ruby on rails"],"categories":["computer science"],"date":"2017-04-21T16:38:00.000Z"},"prevItem":{"title":"Rails on Ubuntu","permalink":"/archives/Rails-on-Ubuntu"},"nextItem":{"title":"Rubocop - Ruby static code analyzer","permalink":"/archives/Rubocop-Ruby-static-code-analyzer"}},"content":"Rails best practices \u662f\u4e00\u500b\u53ef\u4ee5\u5e6b\u4f60\u6aa2\u67e5 Rails \u5c08\u6848\u67b6\u69cb\u7684 gem\\n\\n\u6bd4\u5982\u8aaa\u4f60\u5728 route \u88e1\u9762\u589e\u52a0\u4e86\u4e00\u4e9b routing path \u4f46\u662f\u4f60\u7684 controller \u6c92\u6709\u76f8\u5c0d\u61c9\u7684 action \u7684\u8a71\\n\\n\u5b83\u5c31\u6703\u5e6b\u4f60\u6aa2\u67e5\u51fa\u4f86\uff0c\u4e26\u4e14\u986f\u793a\u8b66\u544a\u8a0a\u606f\\n\\n# Installation\\n\\nAdd following line to Gemfile.rb\\n\\n    gem \'rails_best_practices\', require: false\\n    gem \'rails_best_practices-rake_task\', require: false\\n\\n`rails_best_practices` \u662f\u672c\u8eab\u6aa2\u67e5\u67b6\u69cb\u7684 gem\\n`rails_best_practices-rake_task` \u662f\u65b9\u4fbf\u5beb rake task \u7684 gem\\n\\n# Customize\\n\\n\u8981\u662f\u60f3\u8981 custom \u4e00\u4e9b config\\n\\n\u53ef\u4ee5\u6253\u6307\u4ee4\u7522\u751f config\\n\\n    rails_best_practices -g\\n\\n\u6703\u7522\u751f `/config/rails_best_practices.yml`\\n\\nconfig \u5927\u6982\u9577\u5f97\u50cf\u9019\u6a23\\n\\n    #MoveModelLogicIntoModelCheck: { use_count: 4 }\\n    NeedlessDeepNestingCheck: { nested_count: 2 }\\n    NotRescueExceptionCheck: { }\\n    NotUseDefaultRouteCheck: { }\\n    NotUseTimeAgoInWordsCheck: { }\\n    #OveruseRouteCustomizationsCheck: { customize_count: 3 }\\n    ProtectMassAssignmentCheck: { }\\n    RemoveEmptyHelpersCheck: { }\\n    #RemoveTabCheck: { }\\n\\n\u4e0d\u60f3\u8981\u6aa2\u67e5\u7684 rule \u53ef\u4ee5\u76f4\u63a5\u8a3b\u89e3\u6389\u5373\u53ef\\n\\n# Rake task\\n\\n\u5982\u679c\u8981\u6574\u5408 travis ci \u5728\u6bcf\u6b21 code push \u7684\u6642\u5019\u6aa2\u67e5\u67b6\u69cb\u7684\u8a71\uff0c\u5c31\u8981\u628a rails_best_practices \u5beb\u6210 rake task\uff0c\u7136\u5f8c\u5beb\u6210 `rake` default \u6703\u8dd1\u7684 task\\n\\n\u5728 `lib/tasks/rails_best_practices.rake` \u52a0\u4e0a\u9019\u5e7e\u884c\\n\\n    require \'rails_best_practices/rake_task\'\\n    \\n    RailsBestPractices::RakeTask.new\\n\\n\u7136\u5f8c\u4fee\u6539\u4e00\u4e0b `Rakefile`\\n\\n    require_relative \'config/application\'\\n    \\n    Rails.application.load_tasks\\n    task default: [:rails_best_practices]\\n\\n\u9019\u6a23\u7576\u4f60\u6253 `rake` \u7684\u6642\u5019\u5c31\u6703\u81ea\u52d5\u5e6b\u4f60\u6aa2\u67e5\u67b6\u69cb\u4e86\\n\\n# References\\n\\n* [Github](https://github.com/railsbp/rails_best_practices)"},{"id":"/Rubocop-Ruby-static-code-analyzer","metadata":{"permalink":"/archives/Rubocop-Ruby-static-code-analyzer","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Rubocop-Ruby-static-code-analyzer.md","source":"@site/archives/Rubocop-Ruby-static-code-analyzer.md","title":"Rubocop - Ruby static code analyzer","description":"Rubocop \u662f\u4e00\u500b Ruby static code analyzer","date":"2017-02-04T13:44:00.000Z","formattedDate":"February 4, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"},{"label":"rubocop","permalink":"/archives/tags/rubocop"},{"label":"ruby code formatter","permalink":"/archives/tags/ruby-code-formatter"}],"readingTime":1.72,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Rubocop - Ruby static code analyzer","author":"bananaapple","tags":["ruby on rails","rubocop","ruby code formatter"],"categories":["computer science"],"date":"2017-02-04T13:44:00.000Z"},"prevItem":{"title":"Rails best practices","permalink":"/archives/Rails-Best-practice"},"nextItem":{"title":"Concurrency vs parallelism","permalink":"/archives/concurrency-vs-parallelism"}},"content":"Rubocop \u662f\u4e00\u500b Ruby static code analyzer\\n\u4e3b\u8981\u7528\u4f86 format coding style\\n\\n# Installation\\n\\nAdd following line to Gemfile.rb\\n\\n    gem \'rubocop\', require: false\\n\\n# Configuration\\n\\nConfig \u53ef\u4ee5\u53c3\u8003 github \u4e0a\u7684 [Config](https://github.com/bbatsov/rubocop/tree/master/config) \u8cc7\u6599\u593e\\n\\n\u88e1\u9762\u6709\u4e09\u500b\u6a94\u6848\\n\\n* default.yml(\u4e3b\u8981\u7684)\\n* enabled.yml(\u9810\u8a2d\u958b\u555f\u7684)\\n* disabled.yml(\u9810\u8a2d\u95dc\u6389\u7684)\\n\\n\u6539\u597d\u5f8c\u547d\u540d\u70ba `.rubocop.yml` \u653e\u5728 repo \u88e1\uff0c\u7576\u4f60\u57f7\u884c `rubocop` \u6307\u4ee4\u7684\u6642\u5019\u5c31\u6703\u8b80\u53d6\u9019\u500b\u6a94\u6848\u7684\u8a2d\u5b9a\u958b\u59cb\u6aa2\u67e5\u8a9e\u6cd5\\n\\n\u4ee5\u4e0b\u662f\u6211\u81ea\u5df1\u7528\u7684 Rules\\n\\n\u628a\u4e00\u4e9b\u6bd4\u8f03\u9ebb\u7169\u7684 rules disable \u6389\u4e86\\n\\n    AllCops:\\n      Exclude:\\n        - \'db/migrate/*\'\\n        - \'vendor/**/*\'\\n    Rails:\\n      Enabled: true\\n    \\n    Rails/HasAndBelongsToMany:\\n      Enabled: false\\n    \\n    Bundler/OrderedGems:\\n      Enabled: false\\n    \\n    Style/ClassAndModuleChildren:\\n      Enabled: false\\n    \\n    Style/ConditionalAssignment:\\n      Enabled: false\\n    \\n    Style/Documentation:\\n      Enabled: false\\n    \\n    Style/FrozenStringLiteralComment:\\n      Enabled: false\\n    \\n    Style/Next:\\n      Enabled: false\\n    \\n    Style/GuardClause:\\n        Enabled: false\\n    \\n    Metrics/LineLength:\\n      Enabled: false\\n    \\n    Metrics/BlockLength:\\n      Enabled: false\\n    \\n    Metrics/MethodLength:\\n      Enabled: false\\n    \\n    Metrics/AbcSize:\\n        Enabled: false\\n\\nrubocop \u53ef\u4ee5\u5e6b\u4f60\u81ea\u52d5\u4fee\u6b63\u4e00\u4e9b\u8a9e\u6cd5\uff0c\u53ea\u8981\u52a0\u4e0a `--auto-correct` \u53c3\u6578\\n\\n    rubocop --auto-correct\\n\\n\u4f46\u662f\u6709\u6642\u5019\u60f3\u8981\u4e00\u6b65\u4e00\u6b65\u4fee\u8a9e\u6cd5\uff0c\u6211\u53ea\u60f3\u4fee\u6b63\u6709\u95dc `Style` \u7684\u8a9e\u6cd5\uff0c\u5c31\u8981\u52a0\u4e0a `--only` \u53c3\u6578\uff0c\u5176\u4ed6\u4ee5\u6b64\u985e\u63a8\\n\\n    rubocop --auto-correct --only Style\\n    rubocop --auto-correct --only HashSyntax\\n    rubocop --auto-correct --only StringLiterals\\n\\n# Rake task\\n\\n\u5982\u679c\u8981\u6574\u5408 travis ci \u5728\u6bcf\u6b21 code push \u7684\u6642\u5019\u6aa2\u67e5\u8a9e\u6cd5\u7684\u8a71\uff0c\u5c31\u8981\u628a rubocop \u5beb\u6210 rake task\uff0c\u7136\u5f8c\u5beb\u6210 `rake` default \u6703\u8dd1\u7684 task\\n\\n\u5728 `lib/tasks/rubocop.rake` \u52a0\u4e0a\u9019\u5e7e\u884c\\n\\n    begin\\n      require \'rubocop/rake_task\'\\n    \\n      RuboCop::RakeTask.new\\n    \\n    rescue LoadError # rubocop:disable Lint/HandleExceptions\\n    end\\n\\n\u7136\u5f8c\u4fee\u6539\u4e00\u4e0b `Rakefile`\\n\\n    require_relative \'config/application\'\\n    \\n    Rails.application.load_tasks\\n    task default: [:rubocop]\\n\\n\u9019\u6a23\u7576\u4f60\u6253 `rake` \u7684\u6642\u5019\u5c31\u6703\u81ea\u52d5\u5e6b\u4f60\u6aa2\u67e5\u8a9e\u6cd5\u4e86\\n\\n\u8981\u662f\u6709\u4e0d\u61c2\u7684\u540d\u8a5e\u53ef\u4ee5\u67e5 [Official document](http://www.rubydoc.info/github/bbatsov/rubocop/Rubocop/)"},{"id":"/concurrency-vs-parallelism","metadata":{"permalink":"/archives/concurrency-vs-parallelism","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/concurrency-vs-parallelism.md","source":"@site/archives/concurrency-vs-parallelism.md","title":"Concurrency vs parallelism","description":"\u4e3b\u8981\u8a18\u9304\u4e00\u4e0b\u5169\u8005\u7684\u5dee\u5225","date":"2017-02-01T19:48:00.000Z","formattedDate":"February 1, 2017","tags":[{"label":"review","permalink":"/archives/tags/review"}],"readingTime":2.18,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Concurrency vs parallelism","author":"bananaapple","tags":["review"],"categories":["computer science"],"date":"2017-02-01T19:48:00.000Z"},"prevItem":{"title":"Rubocop - Ruby static code analyzer","permalink":"/archives/Rubocop-Ruby-static-code-analyzer"},"nextItem":{"title":"Preview file using send_file","permalink":"/archives/Preview-file-using-send-file"}},"content":"\u4e3b\u8981\u8a18\u9304\u4e00\u4e0b\u5169\u8005\u7684\u5dee\u5225\\n\\n\u6709\u8208\u8da3\u7684\u8a71\u53ef\u4ee5\u770b\u4e00\u4e0b\u9019\u500b [talk](https://talks.golang.org/2012/waza.slide#1)\\n\\n\u7c21\u55ae\u6458\u9304\u4e00\u4e0b\u88e1\u9762\u7684\u91cd\u9ede\\n\\n\u50cf\u662f\u9019\u5169\u53e5\u5c31\u9053\u51fa\u4e86\u4e3b\u8981\u7684\u5dee\u5225\\n\\n\\n> Concurrency is about dealing with lots of things at once.\\n> Parallelism is about doing lots of things at once.\\n\\n\\nConcurrency \u662f\u4e00\u7a2e\u6982\u5ff5\uff0c\u610f\u601d\u662f\u8aaa\u4f60\u80fd\u4e00\u6b21\u505a\u5f88\u591a\u4e8b\\nParallelism \u5247\u662f\u5176\u4e2d\u4e00\u7a2e\u5be6\u8e10\u9019\u7a2e\u6982\u5ff5\u7684\u505a\u6cd5\\n\\n\u9019\u500b talk \u88e1\u8209\u7684\u4f8b\u5b50\u5f88\u597d\u7406\u89e3\\n\\n\u4eca\u5929\u6709\u4e00\u7fa4 gopher ( golang \u7684\u5409\u7965\u7269 )\uff0c\u53ef\u4ee5\u60f3\u50cf\u6bcf\u96bb gopher \u5c31\u662f\u4e00\u500b task (\u9019\u88e1\u6307\u7684\u662f Linux \u88e1\u7684 process \u6216\u662f thread \u7684\u901a\u7a31)\uff0c\u5b83\u5011\u8981\u53bb\u71d2\u66f8\uff0c\u66f8\u5c31\u662f\u6211\u5011\u60f3\u8981\u57f7\u884c\u7684\u7a0b\u5f0f\u3002\\n\\n![](https://talks.golang.org/2012/waza/gophersimple1.jpg)\\n\\n\u7576\u7136\u6211\u5011\u6703\u60f3\u8981\u7a0b\u5f0f\u80fd\u5920\u57f7\u884c\u5f97\u66f4\u5feb\uff0c\u6240\u4ee5\u589e\u52a0\u4e86\u4e00\u500b gopher\\n\\n![](https://talks.golang.org/2012/waza/gophersimple3.jpg)\\n\\n\u4f46\u662f\u6c92\u6709\u7528\uff0cgopher \u4e5f\u9700\u8981\u6709\u76f8\u5c0d\u7684\u5de5\u5177 ( \u63a8\u8eca ) \u624d\u80fd\u5920\u6539\u5584\u6548\u7387\uff0c\u9019\u88e1\u7684\u63a8\u8eca\u53ef\u4ee5\u985e\u6bd4\u70ba\u6709\u9650\u7684\u8cc7\u6e90\uff0c\u50cf\u662f cpu bus\\n\\n![](https://talks.golang.org/2012/waza/gophersimple2.jpg)\\n\\n\u6709\u8eca\u4e86!\uff0c\u4f46\u662f\u5fc5\u9808\u8003\u616e synchronization \u7684\u554f\u984c\uff0c\u6bd4\u5982\u8aaa A \u66f8\u5fc5\u9808\u6bd4 B \u66f8\u65e9\u71d2\uff0c\u4f46\u662f\u7531\u65bc\u6709\u591a\u500b gopher \u5728\u71d2\u66f8\uff0c\u6240\u4ee5\u6709\u53ef\u80fd\u767c\u751f B \u66f8\u6bd4 A \u66f8\u65e9\u71d2\u7684\u60c5\u6cc1\\n\\n\u597d\u90a3\u8981\u662f\u6211\u5011\u628a\u66f8\u90fd\u5206\u6210 independent \u7684\u60c5\u6cc1\u90a3\u9019\u500b\u554f\u984c\u662f\u4e0d\u662f\u5c31\u89e3\u6c7a\u4e86\\n\\n![](https://talks.golang.org/2012/waza/gophersimple4.jpg)\\n\\n\u90a3\u8b1b\u5230\u9019\u88e1\u5c31\u53ef\u4ee5\u958b\u59cb\u89e3\u91cb\uff0cconcurrency \u548c parallelism \u7684\u5dee\u7570\u4e86\\n\\n# Concurrency\\n\\nconcurrency \u662f\u4e00\u7a2e\u6982\u5ff5\uff0c\u662f\u8aaa\u5c07\u4e00\u500b\u5de5\u4f5c\u5206\u6210\u5f88\u591a\u500b\u7368\u7acb\u4e0d\u5f71\u97ff\u7684\u7247\u6bb5\u4e26\u53bb\u57f7\u884c\\n\\n![](https://talks.golang.org/2012/waza/gophersimple2.jpg)\\n\\n# Parallelism\\n\\nparallelism \u5247\u662f\u8aaa\uff0c\u73fe\u5728\u6211\u7684 CPU \u6838\u5fc3\u4e0d\u53ea\u4e00\u9846\uff0c\u65e2\u7136\u5de5\u4f5c\u662f\u7368\u7acb\u7684\uff0c\u90a3\u6211\u5c31\u53ef\u4ee5\u540c\u6642\u53bb\u505a\u9019\u4e9b\u5de5\u4f5c\uff0c\u6240\u4ee5\u6709\u6a5f\u6703\u767c\u751f\uff0c\u5169\u5806\u4e0d\u540c\u7684\u66f8\uff0c\u5728\u540c\u4e00\u6642\u9593\u88ab\u62ff\u53bb\u71d2\\n\\n![](https://talks.golang.org/2012/waza/gophersimple4.jpg)"},{"id":"/Preview-file-using-send-file","metadata":{"permalink":"/archives/Preview-file-using-send-file","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Preview-file-using-send-file.md","source":"@site/archives/Preview-file-using-send-file.md","title":"Preview file using send_file","description":"\u5728 Ruby on rails \u88e1\u9762","date":"2017-01-05T16:15:00.000Z","formattedDate":"January 5, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"},{"label":"send_file","permalink":"/archives/tags/send-file"}],"readingTime":1.035,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Preview file using send_file","author":"bananaapple","tags":["ruby on rails","send_file"],"categories":["computer science"],"date":"2017-01-05T16:15:00.000Z"},"prevItem":{"title":"Concurrency vs parallelism","permalink":"/archives/concurrency-vs-parallelism"},"nextItem":{"title":"db/seeds for carrierwave","permalink":"/archives/db-seeds-for-carrierwave"}},"content":"\u5728 Ruby on rails \u88e1\u9762\\n\\n\u901a\u5e38\u90fd\u662f\u56e0\u70ba\u8981\u505a\u6a94\u6848\u6b0a\u9650\u63a7\u7ba1\\n\\n\u6240\u4ee5\u624d\u6703\u4f7f\u7528 `send_file` \u9019\u500b method\\n\\n\u5982\u679c\u4e0d\u9700\u8981\u505a\u6a94\u6848\u4e0b\u8f09\u7684\u6b0a\u9650\u63a7\u7ba1\u7684\u8a71\\n\\n\u76f4\u63a5\u628a\u6a94\u6848\u653e\u5728 public \u8cc7\u6599\u593e\u5373\u53ef\\n\\n\u6709 access control \u7684\u6a94\u6848\u4e0b\u8f09\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7 [carrierwave secure upload](https://github.com/carrierwaveuploader/carrierwave/wiki/how-to:-secure-upload)\\n\u9019\u6a23\u505a\u5b8c\u5f8c\u4f60\u7684 model \u88e1\u5c31\u6703\u6709\u4e00\u500b download method\\n\\n\u4f86\u5e6b\u4f60\u8b80\u6a94\u518d\u7528 `send_file` \u4f86\u9001\u51fa\u53bb\\n\\n## `app/controllers/challenges_controller.rb`\\n\\n    def download\\n      send_file file_path, disposition: \'inline\'\\n    end\\n\\n\u91cd\u9ede\u6709\u5169\u500b\\n\\n1. `:disposition` \u53c3\u6578\u7528\u4f86\u6307\u5b9a\u662f `inline` \u9084\u662f `attachment`\uff0cdefault \u662f `attachment`\uff0c\u6240\u4ee5\u8981\u6307\u5b9a\u6210 `inline`\\n2. \u8a2d\u5b9a `:type`\uff0c\u8a2d\u5b9a HTTP content type\uff0c\u700f\u89bd\u5668\u77e5\u9053\u8981\u600e\u9ebc\u5448\u73fe\u9019\u500b\u6a94\u6848\uff0c\u5c31\u662f\u6240\u8b02\u7684 `preview`\uff0c\u901a\u5e38\u9019\u500b\u53c3\u6578\u53ef\u4ee5\u4e0d\u7528\u8a2d\uff0c\u5b83\u6703\u81ea\u52d5\u5f9e `:filename` \u88e1\u6293\u53d6 file extension \u4e26\u9078\u64c7\u9069\u7576\u7684 MIME type \u7576\u4f5c HTTP content type\\n\\n\\\\#Reference\\n\\n* [send_file](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file)"},{"id":"/db-seeds-for-carrierwave","metadata":{"permalink":"/archives/db-seeds-for-carrierwave","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/db-seeds-for-carrierwave.md","source":"@site/archives/db-seeds-for-carrierwave.md","title":"db/seeds for carrierwave","description":"\u9019\u7bc7\u4e3b\u8981\u662f\u7d00\u9304\u5c0d Carrierwave \u5beb db/seeds \u7684\u65b9\u6cd5","date":"2017-01-04T13:58:00.000Z","formattedDate":"January 4, 2017","tags":[{"label":"ruby on rails","permalink":"/archives/tags/ruby-on-rails"},{"label":"carrierwave","permalink":"/archives/tags/carrierwave"}],"readingTime":0.75,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"db/seeds for carrierwave","author":"bananaapple","tags":["ruby on rails","carrierwave"],"categories":["computer science"],"date":"2017-01-04T13:58:00.000Z"},"prevItem":{"title":"Preview file using send_file","permalink":"/archives/Preview-file-using-send-file"},"nextItem":{"title":"N+1 issue","permalink":"/archives/N-1-issue"}},"content":"\u9019\u7bc7\u4e3b\u8981\u662f\u7d00\u9304\u5c0d Carrierwave \u5beb `db/seeds` \u7684\u65b9\u6cd5\\n\\n# \u55ae\u4e00\u6a94\u6848\\n\\nModel \u662f Material\\n\u5176\u4e2d attachment \u6b04\u4f4d\u662f\u7d00\u9304\u6a94\u6848\u7684\u6b04\u4f4d\\n\\n## `app/models/material.rb`\\n\\n    class Material < ApplicationRecord\\n      mount_uploader :attachment, AttachmentUploader\\n    end\\n\\n\u901a\u5e38\u6703\u628a\u6e2c\u8a66\u7684\u6a94\u6848\u653e\u5728 `/test/fixtures/` \u8cc7\u6599\u593e\u4e0b\\n\\n\u6211\u6709\u4e00\u500b\u6a94\u6848\u8def\u5f91\u5728\\n\\n* `/test/fixtures/magic`\\n\\n## `db/seeds.rb`\\n\\n    material = Material.new()\\n    material.attachment = File.new(File.join(\\"test/fixtures/files/\\",\\"magic\\"))\\n    material.save!\\n\\n# \u591a\u500b\u6a94\u6848\\n\\nDatabase \u662f\u4f7f\u7528 sqlite\\n\\n\u6240\u4ee5\u662f\u7528 string \u683c\u5f0f\u4f86\u5b58\u6a94\u6848\u8cc7\u8a0a\\n\\n[\u5b98\u65b9 issue](https://github.com/carrierwaveuploader/carrierwave/issues/1755)\\n\\n\u6211\u6709\u5169\u500b\u6a94\u6848\u8def\u5f91\u5728\\n\\n* `/test/fixtures/magic`\\n* `/test/fixtures/gdb.txt`\\n\\n## `app/models/challenge.rb`\\n\\n    class Challenge < ApplicationRecord\\n      mount_uploaders :attachments, AttachmentUploader\\n    end\\n\\n## `db/seeds.rb`\\n\\n    challenge = Challenge.new()\\n    attachments = [ \\"magic\\", \\"gdb.txt\\" ]\\n    attachments.map! do | attachment |\\n      attachment = File.new(File.join(\\"test/fixtures/files/\\",attachment))\\n    end\\n    challenge.attachments = attachments\\n    challenge.save!"},{"id":"/N-1-issue","metadata":{"permalink":"/archives/N-1-issue","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/N-1-issue.md","source":"@site/archives/N-1-issue.md","title":"N+1 issue","description":"\u6bd4\u5982\u8aaa\u4f60\u73fe\u5728\u6709\u5169\u500b Database Models","date":"2016-12-05T14:32:00.000Z","formattedDate":"December 5, 2016","tags":[{"label":"database","permalink":"/archives/tags/database"}],"readingTime":0.87,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"N+1 issue","author":"bananaapple","tags":["database"],"categories":["computer science"],"date":"2016-12-05T14:32:00.000Z"},"prevItem":{"title":"db/seeds for carrierwave","permalink":"/archives/db-seeds-for-carrierwave"},"nextItem":{"title":"Virtualization","permalink":"/archives/Virtualization"}},"content":"\u6bd4\u5982\u8aaa\u4f60\u73fe\u5728\u6709\u5169\u500b Database Models\\n\\n\u4e00\u500b\u662f Cars \u53e6\u4e00\u500b\u662f Wheels\\n\\n\u4ed6\u5011\u7684\u95dc\u4fc2\u6703\u662f one to many\\n\\n\u4e00\u53f0\u8eca\u6703\u6709\u591a\u500b\u8f2a\u5b50\\n\\n\u6bcf\u500b\u8f2a\u5b50\u90fd\u6703\u6709\u4e00\u500b column: car_id \u6307\u5411\u4e00\u53f0\u8eca\\n\\n\u90a3\u6bd4\u5982\u8aaa\u6211\u4eca\u5929\u60f3\u8981\u5f97\u5230\u6bcf\u53f0\u8eca\u7684\u8cc7\u8a0a\u548c\u6bcf\u53f0\u8eca\u6709\u591a\u5c11\u500b\u8f2a\u5b50\\n\\n\u5047\u8a2d\u8cc7\u6599\u5eab\u88e1\u6709 **N** \u53f0\u8eca\\n\\n\u5148\u641c\u5c0b\u6240\u6709\u7684\u8eca (query count: **1**)\\n\\n    SELECT * FROM Cars;\\n\\n\u5728\u5c0d\u6bcf\u53f0\u8eca\u641c\u5c0b\u6240\u64c1\u6709\u7684\u8f2a\u5b50 (query count: **N**)\\n\\n    SELECT * FROM Wheels WHERE car_id = ?;\\n\\n\u7e3d\u5171\u7684 Query \u6578\u662f **N+1**\\n\\n\u90a3\u89e3\u6c7a\u7684\u65b9\u6cd5\u5c31\u662f\\n\\n    SELECT * FROM Cars;\\n\\n    SELECT * FROM Wheels;\\n\\n\u5c31\u80fd\u628a\u539f\u672c\u7684 Query \u6578 **N+1** \u7e2e\u6e1b\u5230 **2**\\n\\n# Reference\\n\\n* [stack overflow](http://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue)\\n* [google search](https://secure.phabricator.com/book/phabcontrib/article/n_plus_one/)"},{"id":"/Virtualization","metadata":{"permalink":"/archives/Virtualization","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Virtualization.md","source":"@site/archives/Virtualization.md","title":"Virtualization","description":"\u7d00\u9304\u4e00\u4e0b\u81ea\u5df1\u6700\u8fd1\u7814\u8b80\u865b\u64ec\u5316\u6280\u8853\u7684\u7b46\u8a18","date":"2016-11-18T15:07:00.000Z","formattedDate":"November 18, 2016","tags":[{"label":"virtualization","permalink":"/archives/tags/virtualization"}],"readingTime":2.665,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Virtualization","author":"bananaapple","tags":["virtualization"],"categories":["computer science"],"date":"2016-11-18T15:07:00.000Z"},"prevItem":{"title":"N+1 issue","permalink":"/archives/N-1-issue"},"nextItem":{"title":"Javascript function paramter default  value","permalink":"/archives/Javascript-function-paramter-default-value"}},"content":"\u7d00\u9304\u4e00\u4e0b\u81ea\u5df1\u6700\u8fd1\u7814\u8b80\u865b\u64ec\u5316\u6280\u8853\u7684\u7b46\u8a18\\n\\n\u56e0\u70ba\u6700\u8fd1\u8981\u5beb\u6709\u95dc qemu \u7684\u6771\u897f\u9806\u4fbf\u5b78\u7fd2\u4e00\u4e0b\\n\\n\u5728\u4ecb\u7d39\u4e4b\u524d\u8b93\u6211\u5011\u5148\u4e86\u89e3\u4e00\u4e0b\u4e00\u4e9b\u540d\u8a5e\\n\\n## Hypervisor ( virtual machine monitor )\\n\\n\u7528\u4f86\u7ba1\u7406\u548c\u57f7\u884c virtual machine \u7684\u8edf\u9ad4\\n\\n## Host machine \\n\\n\u7528\u4f86\u57f7\u884c hypervisor \u7684\u6a5f\u5668\\n\\n## Guest machine\\n\\n\u88ab hypervisor \u7ba1\u7406\u7684\u6a5f\u5668\\n\\n\u6bd4\u5982\u8aaa\u4f60\u5728\u4f60\u7684\u96fb\u8166\u4e0a\u4f7f\u7528 Virtual Box \u958b\u4e86\u5169\u500b\u865b\u64ec\u6a5f\uff0c\u4e00\u500b\u662f Windows 10\uff0c\u4e00\u500b\u662f Ubuntu\\n\\n\u90a3 Virtual Box \u5c31\u662f hypervisor\uff0c\u4f60\u7684\u96fb\u8166\u5c31\u662f Host machine\uff0c\u800c Windows 10 \u548c Ubuntu \u5c31\u662f Guest machine\\n\\n\u6211\u5011\u901a\u5e38\u6703\u5c07 Guest machine \u7a31\u70ba instance\uff0cinstance \u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u4f5c\u696d\u7cfb\u7d71\\n\\n\u90a3\u8ddf\u9019\u500b\u5c0d\u6bd4\u7684\u5c31\u662f Operating-system-level virtualization\uff0c\u5728\u9019\u901a\u5e38\u6703\u5c07 Guest machine \u7a31\u4f5c\u662f container\uff0ccontainer \u53ea\u80fd\u662f\u540c\u4e00\u7a2e\u7684\u4f5c\u696d\u7cfb\u7d71\uff0c\u4f46\u662f user space \u53ef\u4ee5\u4e0d\u4e00\u6a23\uff0c\u50cf\u662f\u4e0d\u540c\u7684 Linux distribution \u7528\u7684\u662f\u540c\u4e00\u500b kernel\\n\\n\u90a3\u73fe\u5728\u6b63\u5f0f\u958b\u59cb\u4ecb\u7d39 hypervisor \u7684\u985e\u578b\\n\\n## Hypervisor Type\\n\\n![](https://upload.wikimedia.org/wikipedia/commons/e/e1/Hyperviseur.png)\\n\\n- Type-1, native or bare-metal hypervisor\\n\\n\u9019\u7a2e\u985e\u578b\u7684 hypervisor \u53ef\u4ee5\u5728\u786c\u9ad4\u4e0a\u57f7\u884c\\n\\nCitrix XenServer, Microsoft Hyper-V and VMware ESX/ESXi \u5c6c\u65bc\u9019\u7a2e\\n\\n- Type-2 or hosted hypervisors\\n\\nHypervisor \u88ab\u7576\u6210 Host machine \u7684\u4e00\u96bb process \u57f7\u884c\\n\\nVMware Workstation, VMware Player, VirtualBox, Parallels Desktop for Mac and QEMU \u5c6c\u65bc\u9019\u7a2e\\n\\n\u73fe\u5728 Type-1 \u548c Type-2 \u5169\u8005\u4e4b\u9593\u7684\u754c\u7dda\u8d8a\u4f86\u8d8a\u6a21\u7cca\uff0c\u56e0\u70ba\u539f\u672c\u662f Type-2 \u7684 virtual machine \u9452\u65bc\u6548\u80fd\u8003\u91cf\u7d1b\u7d1b\u8de8\u5165 Type-1\uff0c\u50cf\u662f Linux \u7684 KVM \u5c31\u53ef\u4ee5\u88ab\u6b78\u985e\u5728\u5169\u7a2e\u4e0d\u540c\u7684 hypervisor\\n\\n## Virtual machine\\n\\n\u6211\u5011\u6240\u8b02\u7684 virtual machine \u4e3b\u8981\u5206\u70ba\u4ee5\u4e0b\u4e09\u7a2e\\n\\n## Virtual machine type\\n\\n- System virtual machines ( Full virtualization )\\n- Hardware-assisted virtualization\\n- Operating-system-level virtualization\\n\\n## System virtual machines ( Full virtualization )\\n\\n\u63d0\u4f9b\u4e86\u865b\u64ec\u5316\u6574\u500b\u4f5c\u696d\u7cfb\u7d71\u7684\u529f\u80fd\\n\\nParallels Workstation, Parallels Desktop for Mac, VirtualBox, Virtual Iron, Oracle VM, Virtual PC, Virtual Server, Hyper-V, VMware Workstation, VMware Server (discontinued, formerly called GSX Server), VMware ESXi, QEMU, Adeos, Mac-on-Linux\\n\\n## Hardware-assisted virtualization\\n\\n\u900f\u904e\u786c\u9ad4\u7684\u652f\u63f4\uff0c\u4f7f\u5f97\u6548\u7387\u63d0\u9ad8\\n\\nKVM, VMware Workstation, VMware Fusion, Hyper-V, Windows Virtual PC, Xen, Parallels Desktop for Mac, Oracle VM Server for SPARC, VirtualBox and Parallels Workstation\\n\\n## Operating-system-level virtualization\\n\\n\u9019\u7a2e\u6280\u8853\u662f\u6307 kernel \u4f5c\u696d\u7cfb\u7d71\u672c\u8eab\u63d0\u4f9b\u7684\u865b\u64ec\u5316\u529f\u80fd\uff0c\u50cf\u662f Linux container \u7c21\u7a31\u70ba LXC\uff0cDocker \u5728 0.9 \u7248\u524d\u5176\u5be6\u5c31\u662f LXC \u7684\u524d\u7aef\\n\\n# Reference:\\n- [Virtual machine wiki](https://en.wikipedia.org/wiki/Virtual_machine)\\n- [Hypervisor wiki](https://en.wikipedia.org/wiki/Hypervisor)"},{"id":"/Javascript-function-paramter-default-value","metadata":{"permalink":"/archives/Javascript-function-paramter-default-value","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/Javascript-function-paramter-default-value.md","source":"@site/archives/Javascript-function-paramter-default-value.md","title":"Javascript function paramter default  value","description":"function f(s)","date":"2016-11-16T22:56:00.000Z","formattedDate":"November 16, 2016","tags":[{"label":"javascript","permalink":"/archives/tags/javascript"}],"readingTime":0.395,"hasTruncateMarker":false,"authors":[{"name":"bananaapple"}],"frontMatter":{"title":"Javascript function paramter default  value","author":"bananaapple","tags":["javascript"],"categories":["computer science"],"date":"2016-11-16T22:56:00.000Z"},"prevItem":{"title":"Virtualization","permalink":"/archives/Virtualization"},"nextItem":{"title":"My favorite script","permalink":"/archives/My-favorite-script"}},"content":"function f(s)\\n    {\\n    \\tvar a = (s == undefined) ? \'qq\' : s;\\n    }\\n\\nCan be rewrited as following code\\n\\n    function f(s)\\n    {\\n    \\tvar a = s || \'qq\';\\n    }\\n\\nFirst statement will evaluate value of s is true or not.\\n\\nIf true, s is assigned to a.\\n\\nElse, statement will find next value a.k.a. \'qq\'.\\n\\n\'qq\' will be assigned to a.\\n\\nFor further, you could directly write code like this in ES6.\\n\\n    function f(s = \'qq\')\\n    {\\n    }"},{"id":"/My-favorite-script","metadata":{"permalink":"/archives/My-favorite-script","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/My-favorite-script.md","source":"@site/archives/My-favorite-script.md","title":"My favorite script","description":"Format code","date":"2016-06-10T20:35:00.000Z","formattedDate":"June 10, 2016","tags":[{"label":"script","permalink":"/archives/tags/script"}],"readingTime":0.09,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"My favorite script","tags":["script"],"categories":["computer science"],"date":"2016-06-10T20:35:00.000Z"},"prevItem":{"title":"Javascript function paramter default  value","permalink":"/archives/Javascript-function-paramter-default-value"},"nextItem":{"title":"I don\'t know c language","permalink":"/archives/I-don-t-know-c-language"}},"content":"## Format code\\n\\n    astyle --style=allman --unpad-paren --pad-oper --convert-tabs --pad-header --delete-empty-lines [source_code_file]\\n\\nFull document can be found here.\\n\\nhttp://astyle.sourceforge.net/astyle.html"},{"id":"/I-don-t-know-c-language","metadata":{"permalink":"/archives/I-don-t-know-c-language","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/I-don-t-know-c-language.md","source":"@site/archives/I-don-t-know-c-language.md","title":"I don\'t know c language","description":"allocate string by array or pointer","date":"2016-04-21T21:12:00.000Z","formattedDate":"April 21, 2016","tags":[{"label":"c","permalink":"/archives/tags/c"}],"readingTime":1.24,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"I don\'t know c language","tags":["c"],"categories":["computer science"],"date":"2016-04-21T21:12:00.000Z"},"prevItem":{"title":"My favorite script","permalink":"/archives/My-favorite-script"},"nextItem":{"title":"alignment and round number using & and ~","permalink":"/archives/alignment-and-round-number-using-and"}},"content":"## allocate string by array or pointer\\n\\nWhat\'s difference between them?\\n\\n    #include<stdio.h>\\n    \\n    int main()\\n    {\\n        char a[] = \\"apple\\";\\n        char *b = \\"apple\\";\\n    }\\n\\n## Answer\\n\\n        char a[] = \\"apple\\";\\n\\nWhen string is allocated by array, all the characters are saved in the stack.\\n\\n        char *b = \\"apple\\";\\n\\nWhen string is allocated by pointer, only pointer is saved in the stack, and it points to the string, which is saved in the read-only section.\\n\\n## function argument array or pointer\\n\\nWhat\'s difference between them?\\n\\n    #include<stdio.h>\\n    \\n    void func1(char * s)\\n    {\\n    \\tprintf(\\"%s\\",s);\\n    }\\n    void func2(char s[])\\n    {\\n    \\tprintf(\\"%s\\",s);\\n    }\\n    int main()\\n    {\\n    \\tfunc1(\\"apple\\");\\n    \\tfunc2(\\"apple\\");\\n        return 0;\\n    }\\n\\nIn book \\"The c programming language 2nd\\"\\n\\n    As formal parameters in a function definition,\\n    \\tchar s[];\\n    and\\n    \\tchar *s;\\n    are equivalent; we prefer the latter because it says more explicitly that the\\n    parameter is a pointer\\n\\nBut in which situation, we prefer to use array argument?\\nIn one mail to linux kernel mentioned that\\n\\nhttps://lkml.org/lkml/2015/9/3/499\\n\\n    The \\"array as function argument\\" syntax is occasionally useful\\n    (particularly for the multi-dimensional array case), so I very much\\n    understand why it exists, I just think that in the kernel we\'d be\\n    better off with the rule that it\'s against our coding practices.\\n\\n## sizeof is an operator\\n\\nsizeof value is determined in compile time.\\n\\nsizeof is only correctly used in two places.\\n\\n### array\\n\\n    char s[10];\\n    printf(\\"%zu\\",sizeof(s));\\n    // 10\\n\\n### type\\n\\n    char* s=\\"hello\\";\\n    printf(\\"%zu\\",sizeof(s));\\n    printf(\\"%zu\\",sizeof(char *));\\n    /*\\n    8\\n    8\\n    */\\n    // sizeof(variable) == sizeof(variable type)\\n\\nhttps://en.wikipedia.org/wiki/Sizeof"},{"id":"/alignment-and-round-number-using-and","metadata":{"permalink":"/archives/alignment-and-round-number-using-and","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/alignment-and-round-number-using-and.md","source":"@site/archives/alignment-and-round-number-using-and.md","title":"alignment and round number using & and ~","description":"While tracing malloc.c code, I found some interesting bitwise operation.","date":"2016-03-31T02:02:00.000Z","formattedDate":"March 31, 2016","tags":[{"label":"linux kernel","permalink":"/archives/tags/linux-kernel"}],"readingTime":0.525,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"alignment and round number using & and ~","tags":["linux kernel"],"categories":["computer science"],"date":"2016-03-31T02:02:00.000Z"},"prevItem":{"title":"I don\'t know c language","permalink":"/archives/I-don-t-know-c-language"},"nextItem":{"title":"2016 review","permalink":"/archives/review"}},"content":"While tracing malloc.c code, I found some interesting bitwise operation.\\n\\n    #define MALLOC_ALIGN_MASK      (MALLOC_ALIGNMENT - 1)\\n    #define MINSIZE  \\n      (unsigned long)(((MIN_CHUNK_SIZE+MALLOC_ALIGN_MASK) & ~MALLOC_ALIGN_MASK))\\n\\nI found the answer in the stackoverflow.\\n\\nhttp://stackoverflow.com/questions/14561402/how-is-this-size-alignment-working\\n\\n    All powers of two (1, 2, 4, 8, 16, 32...) can be aligned by simple a and operation.\\n    \\n    This gives the size rounded down:\\n    \\n    size &= ~(alignment - 1); \\n    \\n    or if you want to round up:\\n    \\n    size = (size + alignment-1) & ~(alignment-1);\\n\\n**MINSIZE** macro trying to find largest number alignment to **MALLOC_ALIGNMENT**\\n\\nFor example\\n\\n    MIN_CHUNK_SIZE = 25;\\n    MALLOC_ALIGNMENT = 8\\n    MALLOC_ALIGN_MASK = 8-1 = 7;\\n    MINSIZE = (25+7) & ~7 = 32;\\n\\n# More\\n\\nhttps://graphics.stanford.edu/\\\\~seander/bithacks.html"},{"id":"/review","metadata":{"permalink":"/archives/review","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/review.md","source":"@site/archives/review.md","title":"2016 review","description":"TODO list:","date":"2016-03-22T13:48:00.000Z","formattedDate":"March 22, 2016","tags":[{"label":"review","permalink":"/archives/tags/review"}],"readingTime":0.125,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"2016 review","tags":["review"],"categories":["life"],"date":"2016-03-22T13:48:00.000Z"},"prevItem":{"title":"alignment and round number using & and ~","permalink":"/archives/alignment-and-round-number-using-and"},"nextItem":{"title":"how python pass argument in function","permalink":"/archives/how-python-pass-argument-in-function"}},"content":"TODO list:\\n- [O] K&R The C Programming Language (Second Edition)\\n- [ ] Robert Love linux kernel development (Third Edition)\\n- [O] [sqlab website](http://sqlab.github.io/)"},{"id":"/how-python-pass-argument-in-function","metadata":{"permalink":"/archives/how-python-pass-argument-in-function","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/how-python-pass-argument-in-function.md","source":"@site/archives/how-python-pass-argument-in-function.md","title":"how python pass argument in function","description":"\u7db2\u8def\u4e0a\u770b\u5230\u883b\u591a\u8aaa\u6cd5\u7684\u50cf\u662f","date":"2016-03-22T13:47:00.000Z","formattedDate":"March 22, 2016","tags":[{"label":"python","permalink":"/archives/tags/python"}],"readingTime":2.515,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"how python pass argument in function","tags":["python"],"categories":[],"date":"2016-03-22T13:47:00.000Z"},"prevItem":{"title":"2016 review","permalink":"/archives/review"},"nextItem":{"title":"qira introduction","permalink":"/archives/qira-introduction"}},"content":"\u7db2\u8def\u4e0a\u770b\u5230\u883b\u591a\u8aaa\u6cd5\u7684\u50cf\u662f\\ncall by value vs call by reference\\n\u4e8b\u5be6\u4e0a call by assignment \u624d\u662f python \u50b3\u905e\u53c3\u6578\u7684\u65b9\u5f0f\\n\u4e3b\u8981\u8981\u4ecb\u7d39 python \u7684 object\\n\u50cf\u662f\u4ee5\u4e0b\u9019\u884c\u7a0b\u5f0f\u78bc\\n\\n    a = 1\\n\\na \u5c31\u662f\u4e00\u500b reference \u6307\u5411\u6578\u503c\u70ba 1 \u7684 PyIntObject\\n\u5c31\u50cf\u662f c \u88e1\u9762\u7684\u6307\u6a19\u6307\u5411\u4e00\u500b\u8b8a\u6578\u4e00\u6a23\\n\u7e7c\u7e8c\u770b\u4e00\u6bb5\u7a0b\u5f0f\u78bc\\n\\n    def fun(a):\\n        print id(a)\\n    a = 1\\n    print id(a)\\n    fun(a)\\n    \\"\\"\\"\\n    11211096\\n    11211096\\n    \\"\\"\\"\\n\\n\u90a3\u9019\u88e1\u5be6\u969b\u4e0a\u5167\u90e8\u662f\u600e\u9ebc\u505a\u7684\u5462?\\n\u50b3\u9032\u53bb fun function \u88e1\u7684\u4e8b\u5be6\u4e0a\u662f copy of reference to PyIntObject\\n\u4e8b\u5be6\u4e0a\u548c\u9084\u6c92\u50b3\u9032\u53bb\u7684 a \u662f\u5169\u500b\u4e0d\u540c\u7684 reference \u6307\u5411\u540c\u4e00\u500b object\\nid \u9019\u500b\u51fd\u5f0f return \u7684\u662f object \u7684\u4f4d\u7f6e\\n\u6240\u4ee5\u5169\u500b\u7684\u503c\u624d\u6703\u4e00\u6a23\\n\u8981\u662f\u6709\u8208\u8da3\u53ef\u4ee5\u770b cpython \u88e1 id function \u7684\u5be6\u4f5c\\n\\n    static PyObject *\\n    builtin_id(PyModuleDef *self, PyObject *v)\\n    /*[clinic end generated code: output=0aa640785f697f65 input=5a534136419631f4]*/\\n    {\\n        return PyLong_FromVoidPtr(v);\\n    }\\n\\n\u6211\u5011\u4fee\u6539\u4e00\u4e0b\u7a0b\u5f0f\u78bc\\n\\n    def fun(a):\\n        print id(a)\\n        a += 1\\n        print id(a)\\n    a = 1\\n    print id(a)\\n    fun(a)\\n    print id(a)\\n    \\"\\"\\"\\n    41632088\\n    41632088\\n    41632064\\n    41632088\\n    \\"\\"\\"\\n\\n\u6211\u5011\u6703\u767c\u89ba id(a) \u5728 fun function \u524d\u5f8c\u90fd\u4e0d\u6703\u8b8a\\n\u9019\u662f\u56e0\u70ba\u50b3\u9032\u53bb function \u88e1\u7684\u662f copy of reference to object\\n\u6240\u4ee5\u4e0d\u6703\u5f71\u97ff\u5230\u539f\u672c\u7684 reference\\n\u4f46\u662f\u5728 fun function \u88e1\u7684 a\\n\u7d93\u904e +=1 \u5f8c id \u6539\u8b8a\u4e86\\n\u9019\u662f\u56e0\u70ba int \u662f immutable type\\n\u7576\u4f60\u8981\u5617\u8a66\u6539 immutable type \u7684 variable \u7684\u6642\u5019\\n\u4ed6\u6703\u5148\u7522\u751f\u4e00\u500b\u65b0\u7684 object \u518d\u5c07\u4f60\u7684 reference \u6307\u5411\u90a3\u500b object\\n\u8981\u662f\u662fmutable variable\u5462?\\n\\n    def fun(a):\\n        print id(a)\\n        a.append(1)\\n    a = []\\n    print id(a)\\n    fun(a)\\n    print id(a)\\n    \\"\\"\\"\\n    []\\n    140347177386784\\n    [1]\\n    140347177386784\\n    [1]\\n    140347177386784\\n    \\"\\"\\"\\n\\n\u57f7\u884c\u5f8c\u6703\u767c\u73fe id \u90fd\u4e0d\u8b8a\\n\u9019\u662f\u56e0\u70ba mutable variable \u7684\u8655\u7406\u65b9\u5f0f\u548c immutable \u4e0d\u540c\\n\u4ed6\u662f\u5c07 reference \u6307\u5230\u7684 object \u64f4\u5145\u800c\u4e0d\u662f\u91cd\u65b0 assign \u4e00\u500b\\n\u90a3 mutable variable \u7684 assign \u5462?\\n\\n    def fun(a):\\n        print id(a)\\n        a.append(1)\\n    a = []\\n    print id(a)\\n    fun(a)\\n    print id(a)\\n    \\"\\"\\"\\n    []\\n    140318457238304\\n    [1]\\n    140318457251672\\n    []\\n    140318457238304\\n    \\"\\"\\"\\n\\n\u9019\u88e1 mutable variable \u5c31\u548c immutable variable \u4e00\u6a23\u4e86\\n\u76f4\u63a5\u6368\u68c4\u4e86\u539f\u672c\u7684 object \u6307\u5411\u4e00\u500b\u65b0\u7684 object\\n\u6240\u4ee5\u539f\u672c\u50b3\u9032\u53bb\u7684\u4e5f\u662f copy of reference to object\\n\u539f\u672c\u7684 a \u4e0d\u6703\u53d7\u5230\u5f71\u97ff\\n\\nReference:\\n\\n* [call by assignment](https://docs.python.org/2/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference)\\n* [cpython](https://github.com/python/cpython/blob/master/Python%2Fbltinmodule.c#L1092)"},{"id":"/qira-introduction","metadata":{"permalink":"/archives/qira-introduction","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/qira-introduction.md","source":"@site/archives/qira-introduction.md","title":"qira introduction","description":"image from qira.me website","date":"2016-03-22T13:42:00.000Z","formattedDate":"March 22, 2016","tags":[{"label":"qira","permalink":"/archives/tags/qira"},{"label":"ctf","permalink":"/archives/tags/ctf"}],"readingTime":1.84,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"qira introduction","tags":["qira","ctf"],"categories":["computer science"],"date":"2016-03-22T13:42:00.000Z"},"prevItem":{"title":"how python pass argument in function","permalink":"/archives/how-python-pass-argument-in-function"},"nextItem":{"title":"useful tools","permalink":"/archives/useful-tools"}},"content":"![image from qira.me website](http://qira.me/img/first_splash.png)\\n\\n***\\n\\n* QIRA is timeless debugger\\n* Fullname is QEMU Interactive Runtime Analyser\\n* QIRA was initially developed at Google by George Hotz. Work continues at CMU.\\n\\n## qira website\\n\\nhttp://qira.me/\\n\\n## qira github repository\\n\\nhttps://github.com/BinaryAnalysisPlatform/qira\\n\\n## Installation\\n\\n    cd ~/\\n    git clone https://github.com/BinaryAnalysisPlatform/qira.git\\n    cd qira/\\n    ./install.sh\\n\\nIf you want to run with other architecture, run the following command\\n\\nIt will fetch other architecture\'s library\\n\\n    ./fetchlib.sh\\n\\n## Usage\\n\\n![Usage](http://i.imgur.com/N5EpyfB.png)\\n\\n    cd ~/\\n    wget http://train.cs.nctu.edu.tw/files/magic\\n    chmod +x ./magic\\n    qira  -s ./magic\\n\\nopen other terminal and type\\n\\n    nc 0 4000\\n\\nuse this terminal to interactive with program\\n\\nYou could trace the instructions with web browser on http://localhost:3002/\\n\\n## Keyboard Shortcuts in web/client/controls.js\\n\\n    j -- next invocation of instruction\\n    k -- prev invocation of instruction\\n    \\n    shift-j -- next toucher of data\\n    shift-k -- prev toucher of data\\n    \\n    m -- go to return from current function\\n    , -- go to start of current function\\n    \\n    z -- zoom out max on vtimeline\\n    \\n    l -- set iaddr to instruction at current clnum\\n    \\n    left  -- -1 fork\\n    right -- +1 fork\\n    up    -- -1 clnum\\n    down  -- +1 clnum\\n    \\n    esc -- back\\n    \\n    shift-c -- clear all forks\\n    \\n    n -- rename instruction\\n    shift-n -- rename data\\n    ; -- add comment at instruction\\n    shift-; -- add comment at data\\n    \\n    g -- go to change, address, or name\\n    space -- toggle flat/function view\\n    \\n    p -- analyze function at iaddr\\n    c -- make code at iaddr, one instruction\\n    a -- make ascii at iaddr\\n    d -- make data at iaddr\\n    u -- make undefined at iaddr\\n\\n## Further\\n\\nqira is made of following compoments\\n\\n* qemu\\n* flask\\n* python\\n* qiradb\\n\\nqemu is used to emulate other architecture\\n\\nFlask is a microframework for Python based on Werkzeug, Jinja 2 and good intentions\\n\\nThe most code of qira is written by Python\\n\\nqiradb is a python package deal with the instruction trace\\n\\n## Working with ida plugin\\n\\n### Testing environment\\n\\n* Windows 10\\n* Vmware workstation Pro 12 with Ubuntu 15.10\\n\\nInstall qira 1.2 on Ubuntu 15.10 and port-forwarding 3002 port\\n\\nCopy qira_ida66_windows.p64 and qira_ida66_windows.plw from qira/ida/bin/ to ida pro plugins/ directory\\n\\nOpen Chrome and IDA PRO on windows 10\\n\\nIt should work like this\\n\\n![ida plugin](http://qira.me/img/ida.png)"},{"id":"/useful-tools","metadata":{"permalink":"/archives/useful-tools","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/useful-tools.md","source":"@site/archives/useful-tools.md","title":"useful tools","description":"hackmd","date":"2016-03-22T13:40:00.000Z","formattedDate":"March 22, 2016","tags":[{"label":"tool","permalink":"/archives/tags/tool"}],"readingTime":1.01,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"useful tools","tags":["tool"],"categories":[],"date":"2016-03-22T13:40:00.000Z"},"prevItem":{"title":"qira introduction","permalink":"/archives/qira-introduction"},"nextItem":{"title":"symbolic exection introduction","permalink":"/archives/symbolic-exection-introduction"}},"content":"## hackmd\\n\\nhttps://hackmd.io/\\n\\n\u9084\u883b\u63a8\u85a6 hackmd \u7684\\n\\n\u7576\u521d\u662f\u770b\u5230 lab \u7684\u540c\u5b78\u5728\u7528\\n\\n\u4ed6\u5176\u4e2d\u4e00\u500b\u529f\u80fd\u5f88\u597d\u7528\u5c31\u662f\u4e0a\u50b3\u5716\u7247\\n\\n\u4ed6\u6703\u628a\u5716\u7247\u76f4\u63a5\u4e0a\u50b3\u5230 http://imgur.com/\\n\\n\u518d\u7528 markdown \u7684\u5beb\u6cd5\u5c07\u5716\u7247\u63d2\u5165\\n\\n\\n    ![](\u5716\u7247\u7db2\u5740)\\n\\n## hackpad\\n\\nhttps://hackpad.com/\\n\\n\u9019\u61c9\u8a72\u662f\u6700\u591a\u4eba\u807d\u904e\u652f\u63f4 markdown \u8a9e\u6cd5\u7684\u5354\u4f5c\u5e73\u53f0\\n\\n\u5c31\u4e0d\u4ecb\u7d39\u4e86\\n## stackeditor\\n\\nhttps://stackedit.io/editor#\\n\\n\u7dda\u4e0a\u7684 markdown \u7de8\u8f2f\u5668\\n\\n\u53ef\u4ee5\u548c google drive \u548c dropbox \u4f7f\u7528\\n\\n\u5982\u679c\u6709\u518d\u5beb google blogger \u7684\u53ef\u4ee5\u7528\u9019\u500b\\n\\nstackeditor \u5beb\u5b8c\u5f8c\u5c31\u53ef\u4ee5\u76f4\u63a5 publish \u7b97\u662f\u4e00\u500b\u4e0d\u932f\u7684\u529f\u80fd\\n\\n\u7f3a\u9ede\u662f\u6c92\u6709\u8fa6\u6cd5\u548c\u5225\u4eba\u5171\u540c\u7de8\u8f2f\\n\\n# Code Formatter\\n\\n- python: yapf\\n\\nhttps://github.com/google/yapf\\n\\n- C/C++: astyle\\n\\nhttp://astyle.sourceforge.net/\\n\\n\\n# CTF \u76f8\u95dc\\n\\n## Kali Linux\\n\\nhttps://www.kali.org/\\n\\n## gdb\\n\\n## gdb peda\\n\\nhttps://github.com/longld/peda\\n\\n\u8b93\u4f60\u7684 gdb \u4ecb\u9762\u8b8a\u597d\u770b\\n\\n\u9084\u591a\u7684\u4e00\u4e9b\u597d\u7528\u7684 funtcion\\n\\n## qira\\n\\n## strace\\n\\n## ltrace\\n\\n## ODA\\n\\nhttps://www.onlinedisassembler.com/odaweb/"},{"id":"/symbolic-exection-introduction","metadata":{"permalink":"/archives/symbolic-exection-introduction","editUrl":"https://github.com/banananappletw/blog/edit/master/blog/archives/archives/symbolic-exection-introduction.md","source":"@site/archives/symbolic-exection-introduction.md","title":"symbolic exection introduction","description":"*","date":"2016-02-23T09:19:00.000Z","formattedDate":"February 23, 2016","tags":[],"readingTime":3.835,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"symbolic exection introduction","tags":[],"categories":[],"date":"2016-02-23T09:19:00.000Z"},"prevItem":{"title":"useful tools","permalink":"/archives/useful-tools"}},"content":"***\\n\\n# Defenition\\n\\nSymbolic execution (also symbolic evaluation) is a means of analyzing a program to determine what inputs cause each part of a program to execute.\\n\\nAn interpreter follows the program, assuming symbolic values for inputs rather than obtaining actual inputs as normal execution of the program would, a case of abstract interpretation.\\n\\nIt thus arrives at expressions in terms of those symbols for expressions and variables in the program, and constraints in terms of those symbols for the possible outcomes of each conditional branch.\\n\\n# Example\\n\\n    int f() {\\n      ...\\n      y = read();\\n      z = y * 2;\\n      if (z == 12) {\\n        fail();\\n      } else {\\n        printf(\\"OK\\");\\n      }\\n    }\\n\\nDuring \\"concrete\\" execution, the program would read a concrete input value (e.g., 5) and assign it to y.\\n\\nDuring symbolic execution, the program reads a symbolic value (e.g., \u03bb) and assigns it to y.\\n\\nThe program would then proceed with the multiplication and assign \u03bb * 2 to z. When reaching the if statement, it would evaluate \u03bb * 2 == 12.\\n\\nAt this point of the program, \u03bb could take any value, and symbolic execution can therefore proceed along both branches, by \\"forking\\" two paths.\\n\\nEach path get assigned a copy of the program state at the branch instruction as well as a path constraint.\\n\\nWhen paths terminate (e.g., as a result of executing fail() or simply exiting), symbolic execution computes a concrete value for \u03bb by solving the accumulated path constraints on each path.\\n\\n# Limitations\\n\\n## Path Explosion\\n\\nSymbolically executing all feasible program paths does not scale to large programs.\\n\\n## Program-Dependent Efficacy\\n\\nSymbolic execution is used to reason about a program path-by-path which is an advantage over reasoning about a program input-by-input as other testing paradigms use (e.g. Dynamic program analysis).\\n\\nHowever, if few inputs take the same path through the program, there is little savings over testing each of the inputs separately.\\n\\n## Environment Interactions\\n\\nPrograms interact with their environment by performing system calls, receiving signals, etc.\\nConsistency problems may arise when execution reaches components that are not under control of the symbolic execution tool (e.g., kernel or libraries).\\n\\n    int main()\\n     {\\n       FILE *fp = fopen(\\"doc.txt\\");\\n       ...\\n       if (condition) {\\n         fputs(\\"some data\\", fp);\\n       } else {\\n         fputs(\\"some other data\\", fp);\\n       }\\n       ...\\n       data = fgets(..., fp);\\n     }\\n\\nThis program opens a file and, based on some condition, writes different kind of data to the file. It then later reads back the written data. In theory, symbolic execution would fork two paths at line 5 and each path from there on would have its own copy of the file. The statement at line 11 would therefore return data that is consistent with the value of \\"condition\\" at line 5. In practice, file operations are implemented as system calls in the kernel, and are outside the control of the symbolic execution tool. The main approaches to address this challenge are:\\n\\nExecuting calls to the environment directly. The advantage of this approach is that it is simple to implement. The disadvantage is that the side effects of such calls will clobber all states managed by the symbolic execution engine. In the example above, the instruction at line 11 would return \\"some datasome other data\\" or \\"some other datasomedata\\" depending on the sequential ordering of the states.\\n\\nModeling the environment. In this case, the engine instruments the system calls with a model that simulates their effects and that keeps all the side effects in per-state storage. The advantage is that one would get correct results when symbolically executing programs that interact with the environment. The disadvantage is that one needs to implement and maintain many potentially complex models of system calls. Tools such as KLEE\\\\[5\\\\] and Cloud9 take this approach by implementing models for file system operations, sockets, IPC, etc.\\n\\nForking the entire system state. Symbolic execution tools based on virtual machines solve the environment problem by forking the entire VM state. For example, in S2E\\\\[6\\\\] each state is an independent VM snapshot that can be executed separately. This approach alleviates the need for writing and maintaining complex models and allows virtually any program binary to be executed symbolically. However, it has higher memory usage overheads (VM snapshots may be large).\\n\\n# Tools\\n\\n| Tool | It can analyze Arch/Lang | url |\\n| --- | --- | --- |\\n| KLEE | LLVM | http://klee.github.io/ |\\n| S2E | x86, x86-64, ARM / User and kernel-mode binaries | http://s2e.epfl.ch |\\n| Triton | x86 and x86-64 | http://triton.quarkslab.com |\\n| angr | libVEX based | http://angr.io/ |\\n\\n# Reference\\n\\n* https://en.wikipedia.org/wiki/Symbolic_execution\\n* http://www.tutorialspoint.com/software_testing_dictionary/symbolic_execution.htm"}]}')}}]);